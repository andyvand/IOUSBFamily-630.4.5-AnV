/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2014 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

__int64 __fastcall IOUSBHIDDriverPM::MetaClass::MetaClass(IOUSBHIDDriverPM::MetaClass *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::~MetaClass(IOUSBHIDDriverPM::MetaClass *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1);
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1);
__int64 __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *__hidden this); // idb
void __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *this);
__int64 __fastcall IOUSBHIDDriverPM::getMetaClass(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::MetaClass(IOUSBHIDDriverPM::MetaClass *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::alloc(IOUSBHIDDriverPM::MetaClass *this, unsigned __int64 a2);
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1);
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1);
char __fastcall IOUSBHIDDriverPM::init(__int64 a1);
char __fastcall IOUSBHIDDriverPM::start(IOUSBHIDDriverPM *this, uintptr_t arg2);
__int64 __fastcall IOUSBHIDDriverPM::GetNumberProperty(__int64 a1, __int64 a2, __int64 a3);
int __fastcall IOUSBHIDDriverPM::stop(IOUSBHIDDriverPM *this, IOService *a2);
void __fastcall IOUSBHIDDriverPM::free(uintptr_t arg1);
__int64 __fastcall IOUSBHIDDriverPM::message(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t arg3, void *); // idb
int __fastcall IOUSBHIDDriverPM::SetProtocol(IOUSBHIDDriverPM *this, __int16 a2);
int __fastcall IOUSBHIDDriverPM::willTerminate(IOUSBHIDDriverPM *this, IOService *a2, unsigned int a3);
// char __usercall IOUSBHIDDriverPM::didTerminate@<al>(IOUSBHIDDriverPM *this@<rdi>, IOService *a2@<rsi>, bool *a3@<rcx>, __int64 a4@<rax>, unsigned int a5@<edx>);
// __int64 __usercall IOUSBHIDDriverPM::EnsureUsability@<rax>(IOUSBHIDDriverPM *this@<rdi>, __int64 a2@<rax>);
__int64 __fastcall IOUSBHIDDriverPM::powerStateWillChangeTo(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t arg2, uintptr_t arg4); // idb
__int64 __fastcall IOUSBHIDDriverPM::setPowerState(IOUSBHIDDriverPM *this, uintptr_t arg2, IOService *this); // idb
__int64 __fastcall IOUSBHIDDriverPM::CheckForPowerSleepers(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::powerStateDidChangeTo(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t arg3, uintptr_t arg2); // idb
void __fastcall IOUSBHIDDriverPM::powerChangeDone(IOUSBHIDDriverPM *this, uintptr_t arg2);
// __int64 __usercall IOUSBHIDDriverPM::InitializeUSBHIDPowerManagement@<rax>(IOUSBHIDDriverPM *this@<rdi>, IOService *a2@<rsi>, uintptr_t a3@<rax>);
char __fastcall IOUSBHIDDriverPM::handleStart(IOUSBHIDDriverPM *this, uintptr_t arg2);
// int __usercall IOUSBHIDDriverPM::WorkToDo@<eax>(IOUSBHIDDriverPM *this@<rdi>, __int64 a2@<rax>);
int __fastcall IOUSBHIDDriverPM::InterruptReadHandlerEntry(IOUSBHIDDriverPM *this, OSObject *a2, void *a3, unsigned int a4, __int64 a5);
void __fastcall IOUSBHIDDriverPM::handleStop(uintptr_t arg1, IOService *a2);
__int64 __fastcall IOUSBHIDDriverPM::getReport(IOService *this, __int64 a2, unsigned int a3, unsigned __int8 a4);
__int64 __fastcall IOUSBHIDDriverPM::setReport(IOService *this, __int64 a2, unsigned int a3, unsigned __int8 a4);
__int64 __fastcall IOUSBHIDDriverPM::newLocationIDNumber(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::newManufacturerString(IOUSBHIDDriverPM *this); // idb
__int64 __fastcall IOUSBHIDDriverPM::GetIndexedString(IOUSBHIDDriverPM *this, unsigned __int8 a2, unsigned __int8 *a3, unsigned int *a4, signed __int16 a5);
__int64 __fastcall IOUSBHIDDriverPM::newProductIDNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3);
__int64 __fastcall IOUSBHIDDriverPM::newProductString(IOUSBHIDDriverPM *this); // idb
// __int64 __usercall IOUSBHIDDriverPM::newReportDescriptor@<rax>(IOUSBHIDDriverPM *this@<rdi>, IOMemoryDescriptor **a2@<rsi>, __int64 a3@<rax>);
__int64 __fastcall IOUSBHIDDriverPM::GetHIDDescriptor(IOUSBHIDDriverPM *this, unsigned __int8 a2, int a3, unsigned __int8 *a4, unsigned int *a5);
__int64 __fastcall IOUSBHIDDriverPM::newSerialNumberString(IOUSBHIDDriverPM *this); // idb
__int64 __fastcall IOUSBHIDDriverPM::newTransportString(IOUSBHIDDriverPM *this, const char *a2);
__int64 __fastcall IOUSBHIDDriverPM::newVendorIDNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3);
__int64 __fastcall IOUSBHIDDriverPM::newVersionNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3);
__int64 __fastcall IOUSBHIDDriverPM::newCountryCodeNumber(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::newReportIntervalNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3);
void __fastcall IOUSBHIDDriverPM::InterruptReadHandler(IOUSBHIDDriverPM *this, uintptr_t a2, unsigned int a3, __int64 a4);
__int64 __fastcall IOUSBHIDDriverPM::ScheduleWork(IOUSBHIDDriverPM *this, uintptr_t arg4); // idb
__int64 __fastcall IOUSBHIDDriverPM::HandleReport(IOUSBHIDDriverPM *this); // idb
__int64 __fastcall IOUSBHIDDriverPM::ClearFeatureEndpointHalt(IOUSBHIDDriverPM *this); // idb
// __int64 __usercall IOUSBHIDDriverPM::CheckForDeadDevice@<rax>(IOUSBHIDDriverPM *this@<rdi>, bool *a2@<rsi>, __int64 a3@<rax>);
__int64 __fastcall IOUSBHIDDriverPM::getMaxReportSize(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::newIndexedString(IOUSBHIDDriverPM *this, const char *a2);
int __fastcall IOUSBHIDDriverPM::SetIdleMillisecs(IOUSBHIDDriverPM *this, __int16 a2);
char __fastcall IOUSBHIDDriverPM::IsPortSuspended(IOUSBHIDDriverPM *this);
__int64 __fastcall IOUSBHIDDriverPM::RearmInterruptRead(IOUSBHIDDriverPM *this); // idb
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequestWorker(IOUSBHIDDriverPM *this, void *a2, unsigned int a3, unsigned int a4, char a5);
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequest(IOUSBHIDDriverPM *a1, void *a2, unsigned int a3, unsigned int a4);
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequest(IOUSBHIDDriverPM *a1, void *a2, unsigned int a3, unsigned int a4);
__int64 __fastcall IOUSBHIDDriverPM::RaisePowerState(IOUSBHIDDriverPM *this, IOUSBHIDDriverPM *a2);
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM0(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM1(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM2(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM3(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM4(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM5(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM6(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM7(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM8(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM9(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM10(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM11(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM12(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM13(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM14(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM15(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM16(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM17(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM18(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM19(IOUSBHIDDriverPM *__hidden this); // idb
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::~MetaClass(IOUSBHIDDriverPM::MetaClass *__hidden this); // idb
__int64 `global constructor keyed to'_a();
__int64 `global destructor keyed to'_a();
int _start();
__int64 *OSKextGetCurrentIdentifier();
__int64 *OSKextGetCurrentVersionString();
__int64 OSKextGetCurrentLoadTag();
int _stop();
// int __fastcall IOFree(_QWORD, _QWORD); weak
// int __fastcall IOMalloc(_QWORD); weak
// int __fastcall IOSleep(_QWORD); weak
// int __fastcall OSCompareAndSwap(_QWORD, _QWORD, _QWORD); weak
// int __fastcall OSDecrementAtomic(_QWORD, _QWORD); weak
// int __fastcall OSIncrementAtomic(_QWORD, _QWORD); weak
// int __cdecl IOHIDDevice::IOHIDDevice(_QWORD); weak
// _QWORD __cdecl IOHIDDevice::~IOHIDDevice(IOHIDDevice *__hidden this); idb
// _QWORD IOUSBDevice::GetInterfacePowerParent(IOUSBDevice *__hidden this); idb
// int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD); weak
// _QWORD __cdecl OSMetaClass::~OSMetaClass(OSMetaClass *__hidden this); idb
// _QWORD __cdecl IOCommandGate::commandGate(IOCommandGate *__hidden this, OSObject *, int (__cdecl *)(OSObject *, void *, void *, void *, void *)); idb
// int __fastcall OSMetaClassBase::safeMetaCast(_QWORD, _QWORD); weak
// _QWORD __cdecl IOMemoryDescriptor::withAddress(IOMemoryDescriptor *__hidden this, void *, unsigned __int64, unsigned int); idb
// _QWORD __cdecl IOBufferMemoryDescriptor::withCapacity(IOBufferMemoryDescriptor *__hidden this, unsigned __int64, unsigned int, bool); idb
// _QWORD __cdecl OSNumber::withNumber(OSNumber *__hidden this, unsigned __int64, unsigned int); idb
// void __cdecl OSObject::operator delete(void *); idb
// _QWORD __cdecl OSObject::operator new(OSObject *__hidden this, unsigned __int64); idb
// _QWORD __cdecl OSString::withCString(OSString *__hidden this, const char *); idb
// _QWORD IOService::makeUsable(IOService *__hidden this); idb
// _QWORD IOService::getPowerState(IOService *__hidden this); idb
// _QWORD __cdecl IOService::changePowerStateTo(IOService *__hidden this, unsigned __int64); idb
// _QWORD __cdecl IOService::registerInterestedDriver(IOService *__hidden this, IOService *); idb
// _QWORD __cdecl IOService::deRegisterInterestedDriver(IOService *__hidden this, IOService *); idb
// _QWORD __cdecl OSMetaClass::reservedCalled(OSMetaClass *__hidden this, int); idb
// _QWORD OSMetaClass::instanceConstructed(OSMetaClass *__hidden this); idb
// _QWORD IOService::isInactive(IOService *__hidden this); idb
// void __cdecl bzero(void *, size_t);
// int __fastcall clock_interval_to_deadline(_QWORD, _QWORD, _QWORD); weak
// void __cdecl kernel_debug(uint32_t debugid, uintptr_t arg1, uintptr_t arg2, uintptr_t arg3, uintptr_t arg4, uintptr_t arg5);
// void *__cdecl memcpy(void *, const void *, size_t);
// void panic(const char *, ...);
// size_t __cdecl strlcpy(char *, const char *, size_t);
// size_t __cdecl strlen(const char *);
// int __fastcall thread_call_allocate(_QWORD, _QWORD); weak
// int __fastcall thread_call_cancel(_QWORD, _QWORD); weak
// int __fastcall thread_call_enter(_QWORD); weak
// int __fastcall thread_call_free(_QWORD); weak

//-------------------------------------------------------------------------
// Data declarations

int dword_0 = 4277009103; // weak
section_64 stru_150 =
{
  {
    '_',
    '_',
    'g',
    'o',
    't',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0',
    '\0'
  },
  "__DATA",
  24576uLL,
  80uLL,
  24576u,
  3u,
  0u,
  0u,
  0u,
  0u,
  0u,
  0u
}; // weak
_QWORD *off_6000[9] =
{
  &IOHIDDevice::gMetaClass,
  &IOUSBInterface::metaClass,
  &IOBufferMemoryDescriptor::metaClass,
  &OSNumber::metaClass,
  &`vtable for'IOHIDDevice,
  &__stack_chk_guard,
  &gUSBStackDebugFlags,
  &kOSBooleanTrue,
  &kdebug_enable
}; // weak
_QWORD *off_6008[8] =
{
  &IOUSBInterface::metaClass,
  &IOBufferMemoryDescriptor::metaClass,
  &OSNumber::metaClass,
  &`vtable for'IOHIDDevice,
  &__stack_chk_guard,
  &gUSBStackDebugFlags,
  &kOSBooleanTrue,
  &kdebug_enable
}; // weak
_QWORD *off_6010[7] =
{
  &IOBufferMemoryDescriptor::metaClass,
  &OSNumber::metaClass,
  &`vtable for'IOHIDDevice,
  &__stack_chk_guard,
  &gUSBStackDebugFlags,
  &kOSBooleanTrue,
  &kdebug_enable
}; // weak
_QWORD *off_6018[6] =
{
  &OSNumber::metaClass,
  &`vtable for'IOHIDDevice,
  &__stack_chk_guard,
  &gUSBStackDebugFlags,
  &kOSBooleanTrue,
  &kdebug_enable
}; // weak
__int64 *off_6020[5] =
{
  &`vtable for'IOHIDDevice,
  &__stack_chk_guard,
  &gUSBStackDebugFlags,
  &kOSBooleanTrue,
  &kdebug_enable
}; // weak
__int64 *off_6028[4] = { &__stack_chk_guard, &gUSBStackDebugFlags, &kOSBooleanTrue, &kdebug_enable }; // weak
__int64 *off_6030[3] = { &gUSBStackDebugFlags, &kOSBooleanTrue, &kdebug_enable }; // weak
__int64 *off_6038[2] = { &kOSBooleanTrue, &kdebug_enable }; // weak
__int64 *off_6040 = &kdebug_enable; // weak
size_t off_6048 = 69592uLL; // idb
__int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this) = { &IOUSBHIDDriverPM::~IOUSBHIDDriverPM, &IOUSBHIDDriverPM::~IOUSBHIDDriverPM }; // weak
__int64 (__fastcall *off_6BC0[2])(IOUSBHIDDriverPM::MetaClass *__hidden this) =
{
  &IOUSBHIDDriverPM::MetaClass::~MetaClass,
  &IOUSBHIDDriverPM::MetaClass::~MetaClass
}; // weak
_QWORD ourPowerStates = 1LL; // weak
__int64 kmod_info = 0LL; // weak
_QWORD IOUSBHIDDriverPM::gMetaClass; // weak
int (*_realmain)(void); // weak
int (*_antimain)(void); // weak


//----- (00000000000013D0) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::MetaClass(IOUSBHIDDriverPM::MetaClass *this)
{
  __int64 result; // rax@1

  OSMetaClass::OSMetaClass(this, "IOUSBHIDDriverPM", off_6000[0], 400LL);
  result = (__int64)off_6BC0;
  *(_QWORD *)this = off_6BC0;
  return result;
}
// 6000: using guessed type _QWORD *off_6000[9];
// 6BC0: using guessed type __int64 (__fastcall *off_6BC0[2])(IOUSBHIDDriverPM::MetaClass *__hidden this);
// 106A0: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001402) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::~MetaClass(IOUSBHIDDriverPM::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (000000000000140C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1)
{
  __int64 result; // rax@1

  IOHIDDevice::IOHIDDevice(a1);
  result = (__int64)off_6080;
  *(_QWORD *)a1 = off_6080;
  return result;
}
// 6080: using guessed type __int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this);
// 10648: using guessed type int __cdecl IOHIDDevice::IOHIDDevice(_QWORD);

//----- (000000000000142C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1)
{
  __int64 result; // rax@1

  IOHIDDevice::IOHIDDevice(a1);
  result = (__int64)off_6080;
  *(_QWORD *)a1 = off_6080;
  return result;
}
// 6080: using guessed type __int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this);
// 10648: using guessed type int __cdecl IOHIDDevice::IOHIDDevice(_QWORD);

//----- (000000000000144C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *this)
{
  return IOHIDDevice::~IOHIDDevice(this);
}

//----- (0000000000001456) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *this)
{
  return IOHIDDevice::~IOHIDDevice(this);
}

//----- (0000000000001460) ----------------------------------------------------
void __fastcall IOUSBHIDDriverPM::~IOUSBHIDDriverPM(IOUSBHIDDriverPM *this)
{
  IOHIDDevice::~IOHIDDevice(this);
  OSObject::operator delete((void *)this);
}

//----- (0000000000001482) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::getMetaClass(IOUSBHIDDriverPM *this)
{
  return (__int64)&IOUSBHIDDriverPM::gMetaClass;
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000001490) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::MetaClass(IOUSBHIDDriverPM::MetaClass *this)
{
  __int64 result; // rax@1

  OSMetaClass::OSMetaClass(this, "IOUSBHIDDriverPM", off_6000[0], 400LL);
  result = (__int64)off_6BC0;
  *(_QWORD *)this = off_6BC0;
  return result;
}
// 6000: using guessed type _QWORD *off_6000[9];
// 6BC0: using guessed type __int64 (__fastcall *off_6BC0[2])(IOUSBHIDDriverPM::MetaClass *__hidden this);
// 106A0: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (00000000000014C2) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::alloc(IOUSBHIDDriverPM::MetaClass *this, unsigned __int64 a2)
{
  __int64 v2; // rbx@1

  v2 = OSObject::operator new((OSObject *)&stru_150.flags, a2);
  IOHIDDevice::IOHIDDevice(v2);
  *(_QWORD *)v2 = off_6080;
  OSMetaClass::instanceConstructed((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass);
  return v2;
}
// 150: using guessed type section_64;
// 6080: using guessed type __int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this);
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;
// 10648: using guessed type int __cdecl IOHIDDevice::IOHIDDevice(_QWORD);

//----- (0000000000001502) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1)
{
  IOHIDDevice::IOHIDDevice(a1);
  *(_QWORD *)a1 = off_6080;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass);
}
// 6080: using guessed type __int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this);
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;
// 10648: using guessed type int __cdecl IOHIDDevice::IOHIDDevice(_QWORD);

//----- (0000000000001532) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::IOUSBHIDDriverPM(__int64 a1)
{
  IOHIDDevice::IOHIDDevice(a1);
  *(_QWORD *)a1 = off_6080;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass);
}
// 6080: using guessed type __int64 (__fastcall *off_6080[2])(IOUSBHIDDriverPM *__hidden this);
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;
// 10648: using guessed type int __cdecl IOHIDDevice::IOHIDDevice(_QWORD);

//----- (0000000000001562) ----------------------------------------------------
char __fastcall IOUSBHIDDriverPM::init(__int64 a1)
{
  char v1; // r14@2
  void *v2; // rax@3
  __int64 v3; // rax@4

  if ( !(unsigned __int8)(*((int (**)(void))off_6020[0] + 75))() )
    goto LABEL_5;
  *(_DWORD *)(a1 + 368) = 3;
  *(_QWORD *)(a1 + 336) = 12884902144LL;
  *(_DWORD *)(a1 + 352) = 5000;
  v1 = 1;
  if ( !*(_QWORD *)(a1 + 392) )
  {
    LODWORD(v2) = IOMalloc(8LL);
    *(_QWORD *)(a1 + 392) = v2;
    if ( v2 )
    {
      bzero(v2, 8uLL);
      v3 = *(_QWORD *)(a1 + 392);
      *(_DWORD *)(v3 + 4) = 1601203322;
      *(_DWORD *)v3 = 0;
      return v1;
    }
LABEL_5:
    v1 = 0;
  }
  return v1;
}
// 6020: using guessed type __int64 *off_6020[5];
// 104A8: using guessed type int __fastcall IOMalloc(_QWORD);

//----- (00000000000015F4) ----------------------------------------------------
char __fastcall IOUSBHIDDriverPM::start(IOUSBHIDDriverPM *this, uintptr_t arg2)
{
  __int64 v2; // r15@1
  uintptr_t v3; // r12@1
  __int64 *v4; // r13@1
  signed __int64 v5; // rsi@4
  __int64 v6; // rax@4
  __int64 v7; // rdi@5
  int (__cdecl *v8)(OSObject *, void *, void *, void *, void *); // rdx@6
  signed __int64 v9; // r14@6
  __int64 v10; // rax@7
  __int64 v11; // rbx@7
  unsigned int v12; // eax@10
  bool v13; // cl@10
  __int64 v14; // rax@13
  __int64 v15; // rdi@15
  unsigned int v16; // eax@16
  __int64 v17; // rcx@16
  unsigned int v18; // eax@18
  __int64 v19; // rcx@18
  char v20; // r14@25
  unsigned __int8 v21; // bl@26
  unsigned __int16 v22; // ax@26
  uintptr_t v23; // r8@31
  IOService *v24; // rdi@54
  __int64 v25; // rdi@56
  __int64 v26; // rdi@59

  v2 = arg2;
  v3 = (uintptr_t)this;
  v4 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C91u, (uintptr_t)this, arg2, 0LL, 0LL, 0LL);
  v5 = *off_6008[0];
  LODWORD(v6) = OSMetaClassBase::safeMetaCast(v2, *off_6008[0]);
  *((_QWORD *)this + 26) = v6;
  if ( !v6 )
  {
    v9 = 0LL;
    if ( !(*(_BYTE *)v4 & 2) )
      goto LABEL_54;
    v9 = 0LL;
    if ( !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v9 = 0LL;
    v23 = 0LL;
    goto LABEL_53;
  }
  (*(void (__fastcall **)(__int64, signed __int64))(*(_QWORD *)v6 + 32LL))(v6, v5);
  v7 = *((_QWORD *)this + 26);
  v5 = v3;
  if ( !(unsigned __int8)(*(int (__fastcall **)(__int64, uintptr_t, _QWORD, _QWORD))(*(_QWORD *)v7 + 1488LL))(
                           v7,
                           v3,
                           0LL,
                           0LL) )
  {
    v9 = 0LL;
    if ( !(*(_BYTE *)v4 & 2) )
      goto LABEL_54;
    v9 = 0LL;
    if ( !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v9 = 0LL;
    v23 = 1LL;
    goto LABEL_53;
  }
  *(_DWORD *)(v3 + 344) = IOUSBHIDDriverPM::GetNumberProperty(v7, v2, (__int64)"locationID");
  v5 = 0LL;
  v9 = IOCommandGate::commandGate((IOCommandGate *)v3, 0LL, v8);
  if ( !v9 )
  {
    v9 = 0LL;
    if ( !(*(_BYTE *)v4 & 2) )
      goto LABEL_54;
    v9 = 0LL;
    if ( !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v9 = 0LL;
    v23 = 2LL;
    goto LABEL_53;
  }
  LODWORD(v10) = (*(int (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v3 + 1672LL))(v3, 0LL);
  v11 = v10;
  if ( !v10 )
  {
    if ( !(*(_BYTE *)v4 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v23 = 3LL;
    goto LABEL_53;
  }
  (*(void (__fastcall **)(__int64))(*(_QWORD *)v10 + 32LL))(v10);
  *(_QWORD *)(v3 + 240) = v11;
  v5 = v9;
  if ( (*(int (__fastcall **)(__int64, signed __int64))(*(_QWORD *)v11 + 320LL))(v11, v9) )
  {
    if ( !(*(_BYTE *)v4 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v23 = 4LL;
    goto LABEL_53;
  }
  *(_QWORD *)(v3 + 248) = v9;
  v5 = v2;
  if ( !(unsigned __int8)(*((int (__fastcall **)(_QWORD, _QWORD))off_6020[0] + 186))(v3, v2) )
  {
    v9 = 0LL;
    if ( !(*(_BYTE *)v4 & 2) )
      goto LABEL_54;
    v9 = 0LL;
    if ( !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v9 = 0LL;
    v23 = 5LL;
    goto LABEL_53;
  }
  v5 = v3;
  v12 = IOUSBHIDDriverPM::GetNumberProperty(v3, v3, (__int64)"MaxInputReportSize");
  if ( !v12 )
  {
    LOWORD(v12) = (*(int (__fastcall **)(_QWORD, uintptr_t))(**(_QWORD **)(v3 + 224) + 416LL))(
                    *(_QWORD *)(v3 + 224),
                    v3);
    if ( !(_WORD)v12 )
    {
      *(_QWORD *)(v3 + 256) = 0LL;
      goto LABEL_14;
    }
    v12 = (unsigned __int16)v12;
  }
  v5 = 1LL;
  v14 = IOBufferMemoryDescriptor::withCapacity((IOBufferMemoryDescriptor *)v12, 1uLL, 0, v13);
  *(_QWORD *)(v3 + 256) = v14;
  if ( !v14 )
  {
    v9 = 0LL;
    if ( !(*(_BYTE *)v4 & 2) )
      goto LABEL_54;
    v9 = 0LL;
    if ( !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_54;
    v9 = 0LL;
    v23 = 6LL;
    goto LABEL_53;
  }
LABEL_14:
  if ( *(_QWORD *)(v3 + 392) )
  {
    v15 = *(_QWORD *)(v3 + 232);
    if ( v15 )
    {
      **(_DWORD **)(v3 + 392) = (unsigned __int16)(*(int (__fastcall **)(__int64, signed __int64))(*(_QWORD *)v15 + 416LL))(
                                                    v15,
                                                    v5);
      v16 = IOUSBHIDDriverPM::GetNumberProperty(v15, v3, (__int64)"MaxOutputReportSize");
      v17 = *(_QWORD *)(v3 + 392);
      if ( v16 > *(_DWORD *)v17 )
        *(_DWORD *)v17 = v16;
      v5 = v3;
      v18 = IOUSBHIDDriverPM::GetNumberProperty(v15, v3, (__int64)"MaxFeatureReportSize");
      v19 = *(_QWORD *)(v3 + 392);
      if ( v18 > *(_DWORD *)v19 )
        *(_DWORD *)v19 = v18;
    }
    if ( *(_BYTE *)v4 & 2 )
    {
      v5 = (signed __int64)"this";
      (*(void (__fastcall **)(uintptr_t, _QWORD, uintptr_t, signed __int64))(*(_QWORD *)v3 + 640LL))(
        v3,
        "this",
        v3,
        64LL);
    }
    if ( *(_QWORD *)(v3 + 328) == 4LL && !*(_BYTE *)(v3 + 382) )
      (*(void (__fastcall **)(uintptr_t, signed __int64))(*(_QWORD *)v3 + 2648LL))(v3, v5);
    v20 = 1;
    if ( *(_BYTE *)v4 & 2 )
    {
      v21 = (*(int (__fastcall **)(_QWORD, signed __int64))(**(_QWORD **)(v3 + 208) + 2224LL))(
              *(_QWORD *)(v3 + 208),
              v5);
      v22 = (*(int (__cdecl **)(_QWORD))(**(_QWORD **)(v3 + 216) + 2248LL))(*(_QWORD *)(v3 + 216));
      if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        kernel_debug(0x52D1C90u, v3, v22 | ((unsigned __int64)v21 << 16), *(_DWORD *)(v3 + 344), 7uLL, 0LL);
    }
    goto LABEL_65;
  }
  v9 = 0LL;
  if ( *(_BYTE *)v4 & 2 )
  {
    v9 = 0LL;
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v9 = 0LL;
      v23 = 8LL;
LABEL_53:
      v5 = v3;
      kernel_debug(0x52D1C90u, v3, 0LL, 0LL, v23, 0LL);
      goto LABEL_54;
    }
  }
LABEL_54:
  v24 = *(IOService **)(v3 + 264);
  if ( v24 )
  {
    v5 = v3;
    IOService::deRegisterInterestedDriver(v24, (IOService *)v3);
    *(_QWORD *)(v3 + 264) = 0LL;
  }
  (*(void (__fastcall **)(uintptr_t, signed __int64))(*(_QWORD *)v3 + 1944LL))(v3, v5);
  v25 = *(_QWORD *)(v3 + 240);
  if ( v25 && *(_QWORD *)(v3 + 248) )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v25 + 328LL))(v25);
  v26 = *(_QWORD *)(v3 + 208);
  if ( v26 && (unsigned __int8)(*(int (__fastcall **)(__int64, uintptr_t))(*(_QWORD *)v26 + 1504LL))(v26, v3) )
    (*(void (__fastcall **)(_QWORD, uintptr_t, _QWORD))(**(_QWORD **)(v3 + 208) + 1496LL))(
      *(_QWORD *)(v3 + 208),
      v3,
      0LL);
  if ( v9 )
    (*(void (__fastcall **)(signed __int64))(*(_QWORD *)v9 + 40LL))(v9);
  v20 = 0;
LABEL_65:
  if ( *(_BYTE *)v4 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C92u, v3, 0LL, 0LL, (unsigned __int8)v20, 0LL);
  return v20;
}
// 6008: using guessed type _QWORD *off_6008[8];
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 10880: using guessed type int __fastcall OSMetaClassBase::safeMetaCast(_QWORD, _QWORD);

//----- (0000000000001B26) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::GetNumberProperty(__int64 a1, __int64 a2, __int64 a3)
{
  __int64 v3; // rax@1
  __int64 v4; // rbx@1
  __int64 v5; // rax@1
  int v6; // er14@1

  LODWORD(v3) = (*(int (__fastcall **)(__int64, __int64))(*(_QWORD *)a2 + 744LL))(a2, a3);
  v4 = v3;
  LODWORD(v5) = OSMetaClassBase::safeMetaCast(v3, *off_6018[0]);
  v6 = 0;
  if ( v5 )
    v6 = (*(int (__fastcall **)(__int64))(*(_QWORD *)v5 + 328LL))(v5);
  if ( v4 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v4 + 40LL))(v4);
  return (unsigned int)v6;
}
// 6018: using guessed type _QWORD *off_6018[6];
// 10880: using guessed type int __fastcall OSMetaClassBase::safeMetaCast(_QWORD, _QWORD);

//----- (0000000000001B7E) ----------------------------------------------------
int __fastcall IOUSBHIDDriverPM::stop(IOUSBHIDDriverPM *this, IOService *a2)
{
  IOUSBHIDDriverPM *v2; // rbx@1
  __int64 v3; // rdi@1

  v2 = this;
  v3 = *((_QWORD *)this + 30);
  if ( v3 && *((_QWORD *)v2 + 31) )
    (*(void (**)(void))(*(_QWORD *)v3 + 328LL))();
  return (*(int (__fastcall **)(IOUSBHIDDriverPM *, IOService *))((int (__fastcall **)(_QWORD, _QWORD))off_6020[0] + 187))(
           v2,
           a2);
}
// 6020: using guessed type __int64 *off_6020[5];

//----- (0000000000001BC4) ----------------------------------------------------
void __fastcall IOUSBHIDDriverPM::free(uintptr_t arg1)
{
  uintptr_t v1; // rbx@1
  __int64 *v2; // r14@1
  __int64 v3; // rdi@4
  __int64 v4; // rdi@6
  __int64 v5; // rdi@8
  __int64 v6; // rdi@10
  __int64 v7; // rdi@12
  __int64 v8; // rdi@14
  __int64 v9; // rdi@16
  __int64 v10; // rdi@18
  __int64 v11; // rdi@20

  v1 = arg1;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1CD5u, arg1, *(_QWORD *)(arg1 + 208), *(_QWORD *)(arg1 + 216), *(_QWORD *)(arg1 + 320), 0LL);
  v3 = *(_QWORD *)(arg1 + 224);
  if ( v3 )
    (*(void (**)(void))(*(_QWORD *)v3 + 40LL))();
  *(_QWORD *)(v1 + 224) = 0LL;
  v4 = *(_QWORD *)(v1 + 232);
  if ( v4 )
    (*(void (**)(void))(*(_QWORD *)v4 + 40LL))();
  *(_QWORD *)(v1 + 232) = 0LL;
  v5 = *(_QWORD *)(v1 + 208);
  if ( v5 )
    (*(void (**)(void))(*(_QWORD *)v5 + 40LL))();
  *(_QWORD *)(v1 + 208) = 0LL;
  v6 = *(_QWORD *)(v1 + 216);
  if ( v6 )
    (*(void (**)(void))(*(_QWORD *)v6 + 40LL))();
  *(_QWORD *)(v1 + 216) = 0LL;
  v7 = *(_QWORD *)(v1 + 248);
  if ( v7 )
    (*(void (**)(void))(*(_QWORD *)v7 + 40LL))();
  *(_QWORD *)(v1 + 248) = 0LL;
  v8 = *(_QWORD *)(v1 + 256);
  if ( v8 )
    (*(void (**)(void))(*(_QWORD *)v8 + 40LL))();
  *(_QWORD *)(v1 + 256) = 0LL;
  v9 = *(_QWORD *)(v1 + 240);
  if ( v9 )
    (*(void (**)(void))(*(_QWORD *)v9 + 40LL))();
  *(_QWORD *)(v1 + 240) = 0LL;
  v10 = *(_QWORD *)(v1 + 320);
  if ( v10 )
  {
    thread_call_free(v10);
    *(_QWORD *)(v1 + 320) = 0LL;
  }
  v11 = *(_QWORD *)(v1 + 392);
  if ( v11 )
  {
    IOFree(v11, 8LL);
    *(_QWORD *)(v1 + 392) = 0LL;
  }
  (*((void (__fastcall **)(_QWORD))off_6020[0] + 20))(v1);
  if ( *(_BYTE *)v2 & 2 )
  {
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CD6u, v1, *(_QWORD *)(v1 + 208), *(_QWORD *)(v1 + 216), *(_QWORD *)(v1 + 320), 0LL);
  }
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 104A0: using guessed type int __fastcall IOFree(_QWORD, _QWORD);
// 10FF8: using guessed type int __fastcall thread_call_free(_QWORD);

//----- (0000000000001D6A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::message(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t arg3, void *a4)
{
  uintptr_t v4; // r12@1
  uintptr_t v5; // r15@1
  __int64 *v6; // r14@1
  __int64 v7; // r13@2
  unsigned __int8 v8; // al@2
  int v9; // er13@4
  __int64 *v10; // rbx@5
  __int64 v11; // rdi@10
  __int64 v12; // rdi@12
  __int64 v13; // rdi@14
  signed __int64 v14; // rsi@20
  void *v16; // [sp+8h] [bp-48h]@1
  char v17; // [sp+10h] [bp-40h]@24
  char v18; // [sp+11h] [bp-3Fh]@24
  __int16 v19; // [sp+12h] [bp-3Eh]@24
  __int16 v20; // [sp+14h] [bp-3Ch]@24
  __int16 v21; // [sp+16h] [bp-3Ah]@24
  __int64 v22; // [sp+18h] [bp-38h]@24

  v16 = a4;
  v4 = arg3;
  v5 = (uintptr_t)this;
  v6 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v7 = *((_QWORD *)this + 41);
    v8 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C95u, (uintptr_t)this, (unsigned int)arg2, v4, v8 | (unsigned __int64)(v7 << 16), 0LL);
  }
  v9 = (*(int (__fastcall **)(IOUSBHIDDriverPM *, _QWORD, uintptr_t, void *))((int (__fastcall **)(_QWORD, _QWORD, _QWORD, _QWORD))off_6020[0]
                                                                            + 232))(
         this,
         (unsigned int)arg2,
         v4,
         v16);
  if ( (unsigned int)(arg2 + 536854517) <= 6 )
  {
    v10 = v6;
    switch ( (_DWORD)v6 )
    {
      case 0:
      case 4:
        *((_BYTE *)this + 384) = 0;
        (*(void (__fastcall **)(IOUSBHIDDriverPM *, signed __int64, signed __int64))(*(_QWORD *)this + 1976LL))(
          this,
          1LL,
          4LL);
        break;
      case 2:
        *((_BYTE *)this + 384) = 1;
        break;
      case 6:
        if ( *((_DWORD *)this + 85) )
        {
          *((_BYTE *)this + 385) = 1;
          v11 = *((_QWORD *)this + 28);
          if ( v11 )
            (*(void (**)(void))(*(_QWORD *)v11 + 296LL))();
          v12 = *(_QWORD *)(v5 + 232);
          if ( v12 )
            (*(void (**)(void))(*(_QWORD *)v12 + 296LL))();
        }
        *(_DWORD *)(v5 + 340) = *(_DWORD *)(v5 + 368);
        *(_WORD *)(v5 + 385) = 0;
        v13 = *(_QWORD *)(v5 + 208);
        if ( v13 && *(_QWORD *)(v5 + 216) )
        {
          if ( (unsigned __int8)(*(int (**)(void))(*(_QWORD *)v13 + 2248LL))() == 3
            && (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v5 + 208) + 2256LL))() == 1
            && (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v5 + 208) + 2264LL))() == 1 )
          {
            if ( (unsigned __int16)(*(int (**)(void))(**(_QWORD **)(v5 + 216) + 2288LL))() == 1452 )
              v14 = 0LL;
            else
              v14 = 24LL;
            (*(void (__fastcall **)(uintptr_t, signed __int64))(*(_QWORD *)v5 + 2640LL))(v5, v14);
          }
          if ( (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v5 + 208) + 2256LL))() == 1 )
          {
            v17 = 33;
            v18 = 11;
            v19 = 1;
            v20 = (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v5 + 208) + 2224LL))();
            v21 = 0;
            v22 = 0LL;
            (*(void (__fastcall **)(uintptr_t, char *, _QWORD, _QWORD))(*(_QWORD *)v5 + 2672LL))(
              v5,
              &v17,
              *(_DWORD *)(v5 + 352),
              0LL);
          }
          if ( (unsigned __int16)(*(int (**)(void))(**(_QWORD **)(v5 + 216) + 2288LL))() == 1699 )
            (*(void (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v5 + 2640LL))(v5, 0LL);
        }
        v9 = (*(int (__fastcall **)(uintptr_t))(*(_QWORD *)v5 + 2648LL))(v5);
        if ( *(_BYTE *)v6 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1C94u, v5, v9, 0LL, 0LL, 0LL);
        break;
      case 1:
      case 3:
      case 5:
        break;
      default:
        goto LABEL_5;
    }
  }
  else
  {
LABEL_5:
    v10 = v6;
  }
  if ( *(_BYTE *)v10 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C96u, v5, 0LL, 0LL, v9, 0LL);
  return (unsigned int)v9;
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000002068) ----------------------------------------------------
int __fastcall IOUSBHIDDriverPM::SetProtocol(IOUSBHIDDriverPM *this, __int16 a2)
{
  char v3; // [sp+0h] [bp-20h]@1
  char v4; // [sp+1h] [bp-1Fh]@1
  __int16 v5; // [sp+2h] [bp-1Eh]@1
  __int16 v6; // [sp+4h] [bp-1Ch]@1
  __int16 v7; // [sp+6h] [bp-1Ah]@1
  __int64 v8; // [sp+8h] [bp-18h]@1

  v3 = 33;
  v4 = 11;
  v5 = a2;
  v6 = (unsigned __int8)(*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 26) + 2224LL))(*((_QWORD *)this + 26));
  v7 = 0;
  v8 = 0LL;
  return (*(int (__fastcall **)(IOUSBHIDDriverPM *, char *, _QWORD, _QWORD))(*(_QWORD *)this + 2672LL))(
           this,
           &v3,
           *((_DWORD *)this + 88),
           0LL);
}

//----- (00000000000020C4) ----------------------------------------------------
int __fastcall IOUSBHIDDriverPM::willTerminate(IOUSBHIDDriverPM *this, IOService *a2, unsigned int a3)
{
  unsigned int v3; // er14@1
  IOUSBHIDDriverPM *v4; // rbx@1
  __int64 v5; // rdi@1
  __int64 v6; // rdi@3

  v3 = a3;
  v4 = this;
  v5 = *((_QWORD *)this + 28);
  if ( v5 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v5 + 296LL))(v5);
  v6 = *((_QWORD *)v4 + 29);
  if ( v6 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v6 + 296LL))(v6);
  return (*(int (__fastcall **)(IOUSBHIDDriverPM *, IOService *, _QWORD))((int (__fastcall **)(_QWORD, _QWORD, _QWORD))off_6020[0]
                                                                        + 130))(
           v4,
           a2,
           v3);
}
// 6020: using guessed type __int64 *off_6020[5];

//----- (0000000000002122) ----------------------------------------------------
char __usercall IOUSBHIDDriverPM::didTerminate@<al>(IOUSBHIDDriverPM *this@<rdi>, IOService *a2@<rsi>, bool *a3@<rcx>, __int64 a4@<rax>, unsigned int a5@<edx>)
{
  bool *v5; // r14@1
  unsigned int v6; // er15@1
  IOService *v7; // r12@1
  uintptr_t v8; // rbx@1
  __int64 *v9; // r13@1
  __int64 v10; // rax@5
  int v11; // eax@6
  uintptr_t v12; // rdx@10
  uintptr_t v13; // rcx@10
  uintptr_t v14; // r8@10
  IOService *v15; // rdi@15
  __int64 v16; // rdi@17
  char v17; // r14@20
  __int64 v19; // [sp+0h] [bp-30h]@1

  v19 = a4;
  v5 = a3;
  v6 = a5;
  v7 = a2;
  v8 = (uintptr_t)this;
  v9 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    a2 = this;
    kernel_debug(0x52D1CD1u, (uintptr_t)this, *((_DWORD *)this + 94), 0LL, 0LL, 0LL);
  }
  if ( *((_DWORD *)this + 94) > 0 )
  {
    clock_interval_to_deadline(5LL, 1000000000LL, &v19);
    a2 = (IOService *)(&dword_0 + 1);
    LODWORD(v10) = (*(int (__fastcall **)(IOUSBHIDDriverPM *, signed __int64))(*(_QWORD *)this + 2688LL))(this, 1LL);
    IOUSBHIDDriverPM::EnsureUsability(this, v10);
    if ( *((_DWORD *)this + 94) > 0 )
    {
      a2 = (IOUSBHIDDriverPM *)((char *)this + 389);
      *((_BYTE *)this + 389) = 1;
      v11 = (*(int (__fastcall **)(_QWORD, char *, __int64, signed __int64))(**((_QWORD **)this + 31) + 496LL))(
              *((_QWORD *)this + 31),
              (char *)this + 389,
              v19,
              2LL);
      *((_BYTE *)this + 389) = 0;
      if ( v11 )
      {
        if ( v11 == 1 )
        {
          if ( *(_BYTE *)v9 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v12 = *((_DWORD *)this + 94);
            v13 = 0LL;
            v14 = 0LL;
LABEL_14:
            a2 = this;
            kernel_debug(0x52D1CD0u, (uintptr_t)this, v12, v13, v14, 0LL);
            goto LABEL_15;
          }
        }
        else if ( *(_BYTE *)v9 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          v13 = *((_DWORD *)this + 94);
          v12 = v11;
          v14 = 1LL;
          goto LABEL_14;
        }
      }
    }
  }
LABEL_15:
  v15 = (IOService *)*((_QWORD *)this + 33);
  if ( v15 )
  {
    a2 = (IOService *)v8;
    IOService::deRegisterInterestedDriver(v15, (IOService *)v8);
    *(_QWORD *)(v8 + 264) = 0LL;
  }
  (*(void (__fastcall **)(uintptr_t, IOService *))(*(_QWORD *)v8 + 1944LL))(v8, a2);
  v16 = *(_QWORD *)(v8 + 208);
  if ( v16 && (unsigned __int8)(*(int (__fastcall **)(__int64, uintptr_t))(*(_QWORD *)v16 + 1504LL))(v16, v8) )
    (*(void (__fastcall **)(_QWORD, uintptr_t, _QWORD))(**(_QWORD **)(v8 + 208) + 1496LL))(
      *(_QWORD *)(v8 + 208),
      v8,
      0LL);
  v17 = (*(int (__fastcall **)(uintptr_t, IOService *, _QWORD, bool *))((int (__fastcall **)(_QWORD, _QWORD, _QWORD, _QWORD))off_6020[0]
                                                                      + 131))(
          v8,
          v7,
          v6,
          v5);
  if ( *(_BYTE *)v9 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1CD2u, v8, *(_DWORD *)(v8 + 376), 0LL, 0LL, 0LL);
  return v17;
}
// 0: using guessed type int;
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 10F98: using guessed type int __fastcall clock_interval_to_deadline(_QWORD, _QWORD, _QWORD);

//----- (000000000000230E) ----------------------------------------------------
__int64 __usercall IOUSBHIDDriverPM::EnsureUsability@<rax>(IOUSBHIDDriverPM *this@<rdi>, __int64 a2@<rax>)
{
  __int64 *v2; // r13@1
  uintptr_t v3; // rbx@2
  unsigned int v4; // eax@2
  signed int v5; // er14@5
  int v6; // er15@7
  int v7; // eax@7
  __int64 v8; // rbx@18
  unsigned int v9; // eax@18
  __int64 v11; // [sp+0h] [bp-30h]@1

  v11 = a2;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::getPowerState(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C8Du, (uintptr_t)this, v3, v4, *((_BYTE *)this + 383), 0LL);
  }
  if ( (unsigned __int8)(*(int (**)(void))(**((_QWORD **)this + 30) + 304LL))() )
  {
    v5 = 0;
    panic(
      "\"IOUSBHIDDriverPM::EnsureUsability - onThread\\n\"@/SourceCache/IOUSBFamily_kexts/IOUSBFamily-710.4.14/IOUSBHIDDriverPM/Classes/IOUSBHIDDriverPM.cpp:2617",
      v11);
  }
  else
  {
    v5 = 0;
    if ( *((_QWORD *)this + 41) <= 3uLL )
    {
      clock_interval_to_deadline(5LL, 1000000000LL, &v11);
      *((_BYTE *)this + 387) = 1;
      ++*((_DWORD *)this + 94);
      v6 = (*(int (__fastcall **)(_QWORD, char *, __int64, signed __int64))(**((_QWORD **)this + 31) + 496LL))(
             *((_QWORD *)this + 31),
             (char *)this + 328,
             v11,
             2LL);
      v7 = *((_DWORD *)this + 94) - 1;
      *((_DWORD *)this + 94) = v7;
      if ( *((_BYTE *)this + 389) && !v7 )
      {
        if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1C8Cu, (uintptr_t)this, 0LL, 0LL, 0LL, 0LL);
        (*(void (__fastcall **)(_QWORD, char *, _QWORD))(**((_QWORD **)this + 31) + 488LL))(
          *((_QWORD *)this + 31),
          (char *)this + 389,
          0LL);
      }
      if ( v6 )
      {
        v5 = -536870199;
        if ( *(_BYTE *)v2 & 2 )
        {
          if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
            kernel_debug(0x52D1C8Cu, (uintptr_t)this, v6, 0LL, 1uLL, 0LL);
        }
      }
    }
  }
  if ( *(_BYTE *)v2 & 2 )
  {
    v8 = *((_QWORD *)this + 41);
    v9 = IOService::getPowerState(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C8Eu, (uintptr_t)this, v9 | (unsigned __int64)(v8 << 16), *((_BYTE *)this + 383), v5, 0LL);
  }
  return (unsigned int)v5;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 10F98: using guessed type int __fastcall clock_interval_to_deadline(_QWORD, _QWORD, _QWORD);

//----- (00000000000024F8) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::powerStateWillChangeTo(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t a3, uintptr_t arg4)
{
  uintptr_t v4; // rbx@1
  unsigned __int64 v5; // r14@1
  uintptr_t v6; // r13@1
  uintptr_t v7; // r12@1
  __int64 *v8; // r15@1
  bool v9; // zf@6
  __int64 *v10; // rbx@6
  __int64 v11; // rdi@11
  int v13; // [sp+0h] [bp-2Ch]@1

  v4 = arg4;
  v5 = a3;
  v6 = arg2;
  v7 = (uintptr_t)this;
  v13 = (*(int (__cdecl **)(IOUSBHIDDriverPM *))((int (__cdecl **)(_QWORD))off_6020[0] + 259))(this);
  v8 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    arg2 = (uintptr_t)this;
    kernel_debug(0x52D1C7Du, (uintptr_t)this, v6, v5, v4, 0LL);
  }
  if ( (unsigned __int8)IOService::isInactive(this) )
  {
    v10 = v8;
    if ( *(_BYTE *)v8 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C7Cu, (uintptr_t)this, 0LL, 0LL, 0LL, 0LL);
  }
  else if ( this == (IOUSBHIDDriverPM *)v4 )
  {
    v10 = v8;
    if ( *((_QWORD *)this + 41) != v5 )
      *((_BYTE *)this + 383) = 1;
  }
  else
  {
    v9 = *((_QWORD *)this + 33) == v4;
    v10 = v8;
    if ( v9 && v5 <= 3 )
    {
      if ( *(_BYTE *)v8 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      {
        arg2 = (uintptr_t)this;
        kernel_debug(0x52D1C7Cu, (uintptr_t)this, 0LL, 0LL, 1uLL, 0LL);
      }
      *((_BYTE *)this + 385) = 1;
      (*(void (__fastcall **)(_QWORD, uintptr_t))(**((_QWORD **)this + 28) + 296LL))(*((_QWORD *)this + 28), arg2);
      v11 = *((_QWORD *)this + 29);
      if ( v11 )
        (*(void (__cdecl **)(__int64))(*(_QWORD *)v11 + 296LL))(v11);
      *(_BYTE *)(v7 + 385) = 0;
    }
  }
  if ( *(_BYTE *)v10 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C7Eu, v7, v5, *(_QWORD *)(v7 + 264), v13, 0LL);
  return (unsigned int)v13;
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (000000000000267C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::setPowerState(IOUSBHIDDriverPM *this, uintptr_t arg2, IOService *a3)
{
  IOService *v3; // r14@1
  uintptr_t v4; // r15@1
  __int64 *v5; // r13@1
  __int64 v6; // rbx@2
  unsigned __int8 v7; // al@2
  uintptr_t v8; // rdx@9
  uintptr_t v9; // r8@9
  unsigned int v10; // eax@13
  IOUSBHIDDriverPM *v11; // rsi@15
  int v12; // eax@23
  int v13; // ebx@28

  v3 = a3;
  v4 = arg2;
  v5 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v6 = *((_QWORD *)this + 41);
    v7 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C81u, (uintptr_t)this, arg2, (uintptr_t)v3, v7 | (unsigned __int64)(v6 << 16), 0LL);
  }
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    if ( this == v3 )
    {
      if ( arg2 <= 4 )
      {
        *((_QWORD *)this + 41) = arg2;
        if ( arg2 == 4 )
        {
          if ( *(_BYTE *)v5 & 2 )
          {
            v10 = IOService::getPowerState(v3);
            if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              kernel_debug(0x52D1C80u, (uintptr_t)this, v10, 0LL, 0LL, 0LL);
          }
          v11 = (IOUSBHIDDriverPM *)IOUSBHIDDriverPM::CheckForPowerSleepers;
          (*(void (__fastcall **)(_QWORD, __int64 (__fastcall *)(IOUSBHIDDriverPM *__hidden), _QWORD, _QWORD, _QWORD, _QWORD))(**((_QWORD **)this + 31) + 456LL))(
            *((_QWORD *)this + 31),
            IOUSBHIDDriverPM::CheckForPowerSleepers,
            0LL,
            0LL,
            0LL,
            0LL);
          if ( !(unsigned __int8)IOService::isInactive(v3) )
          {
            *((_BYTE *)this + 388) = 1;
            v8 = *((_DWORD *)this + 91);
            if ( *((_DWORD *)this + 91) )
            {
              if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              {
                v9 = 3LL;
                goto LABEL_27;
              }
            }
            else
            {
              *((_DWORD *)this + 85) = *((_DWORD *)this + 92);
              *((_BYTE *)this + 385) = 0;
              if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              {
                v11 = this;
                kernel_debug(0x52D1C80u, (uintptr_t)this, 0LL, 0LL, 1uLL, 0LL);
              }
              v12 = (*(int (__fastcall **)(IOUSBHIDDriverPM *, IOUSBHIDDriverPM *))(*(_QWORD *)this + 2648LL))(
                      this,
                      v11);
              if ( v12 && *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              {
                v8 = v12;
                v9 = 2LL;
                goto LABEL_27;
              }
            }
          }
        }
      }
    }
    else if ( *((IOService **)this + 33) == v3 && *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v8 = 0LL;
      v9 = 4LL;
LABEL_27:
      kernel_debug(0x52D1C80u, (uintptr_t)this, v8, 0LL, v9, 0LL);
      goto LABEL_28;
    }
  }
LABEL_28:
  v13 = (*(int (__fastcall **)(IOUSBHIDDriverPM *, uintptr_t, IOService *))((int (__fastcall **)(_QWORD, _QWORD, _QWORD))off_6020[0]
                                                                          + 255))(
          this,
          v4,
          v3);
  if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C82u, (uintptr_t)this, 0LL, 0LL, v13, 0LL);
  return (unsigned int)v13;
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (00000000000028DE) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::CheckForPowerSleepers(IOUSBHIDDriverPM *this)
{
  if ( *((_BYTE *)this + 387) )
  {
    *((_BYTE *)this + 387) = 0;
    (*(void (__fastcall **)(_QWORD, char *, _QWORD))(**((_QWORD **)this + 31) + 488LL))(
      *((_QWORD *)this + 31),
      (char *)this + 328,
      0LL);
  }
  return 0LL;
}

//----- (0000000000002914) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::powerStateDidChangeTo(IOUSBHIDDriverPM *this, uintptr_t arg2, uintptr_t arg3, uintptr_t a4)
{
  uintptr_t v4; // r15@1
  uintptr_t v5; // r12@1
  __int64 *v6; // r14@1
  unsigned int v7; // eax@10
  int v9; // [sp+0h] [bp-2Ch]@1

  v4 = a4;
  v5 = arg3;
  v9 = (*(int (__cdecl **)(IOUSBHIDDriverPM *))((int (__cdecl **)(_QWORD))off_6020[0] + 260))(this);
  v6 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C85u, (uintptr_t)this, arg2, v5, v4, 0LL);
  if ( !(unsigned __int8)IOService::isInactive(this)
    && *((_QWORD *)this + 33) == v4
    && *(_BYTE *)v6 & 2
    && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C84u, (uintptr_t)this, v4, 0LL, 0LL, 0LL);
  if ( *(_BYTE *)v6 & 2 )
  {
    v7 = IOService::getPowerState(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C86u, (uintptr_t)this, v7, 0LL, v9, 0LL);
  }
  return (unsigned int)v9;
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000002A04) ----------------------------------------------------
void __fastcall IOUSBHIDDriverPM::powerChangeDone(IOUSBHIDDriverPM *this, uintptr_t arg2)
{
  __int64 *v2; // r12@1
  uintptr_t v3; // r15@2
  unsigned __int8 v4; // al@2

  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C89u, (uintptr_t)this, arg2, v3, v4, 0LL);
  }
  *((_BYTE *)this + 383) = 0;
  (*((void (__fastcall **)(_QWORD, _QWORD))off_6020[0] + 267))(this, arg2);
  if ( *(_BYTE *)v2 & 2 )
  {
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C8Au, (uintptr_t)this, *((_QWORD *)this + 41), 0LL, 0LL, 0LL);
  }
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000002AB8) ----------------------------------------------------
__int64 __usercall IOUSBHIDDriverPM::InitializeUSBHIDPowerManagement@<rax>(IOUSBHIDDriverPM *this@<rdi>, IOService *a2@<rsi>, uintptr_t a3@<rax>)
{
  IOService *v3; // rbx@1
  uintptr_t v4; // r12@1
  __int64 *v5; // r13@1
  IOUSBHIDDriverPM *v6; // rsi@4
  int v7; // ebx@4
  __int64 v8; // rax@9
  int v9; // eax@10
  __int64 v10; // rdi@14
  IOService *v11; // rax@14
  uintptr_t v12; // rsi@16
  unsigned int v13; // er14@16
  uintptr_t v14; // r15@16
  uintptr_t v15; // rax@19
  __int64 v16; // rax@21
  int v17; // eax@21
  int v18; // edx@23
  int v19; // eax@24
  __int64 v20; // rax@33
  int v21; // ebx@33
  uintptr_t arg3; // [sp+0h] [bp-30h]@1

  arg3 = a3;
  v3 = a2;
  v4 = (uintptr_t)this;
  v5 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    a2 = this;
    kernel_debug(0x52D1C79u, (uintptr_t)this, *((_QWORD *)this + 41), 0LL, 0LL, 0LL);
  }
  (*(void (__fastcall **)(IOUSBHIDDriverPM *, IOService *))(*(_QWORD *)this + 1936LL))(this, a2);
  (*(void (__fastcall **)(IOService *, IOUSBHIDDriverPM *))(*(_QWORD *)v3 + 1952LL))(v3, this);
  IOService::makeUsable(this);
  v6 = this;
  v7 = (*(int (__fastcall **)(IOUSBHIDDriverPM *, IOUSBHIDDriverPM *, _QWORD *, signed __int64))(*(_QWORD *)this + 1960LL))(
         this,
         this,
         &ourPowerStates,
         5LL);
  if ( v7 )
  {
    if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v6 = this;
      kernel_debug(0x52D1C78u, (uintptr_t)this, v7, 0LL, 0LL, 0LL);
    }
    (*(void (__fastcall **)(IOUSBHIDDriverPM *, IOUSBHIDDriverPM *))(*(_QWORD *)this + 1944LL))(this, v6);
  }
  else
  {
    LODWORD(v8) = (*(int (__fastcall **)(IOUSBHIDDriverPM *, _QWORD))(*(_QWORD *)this + 696LL))(this, "kUSBHIDIdleTime");
    *((_DWORD *)this + 90) = 4;
    if ( v8 )
    {
      v9 = (*(int (__fastcall **)(__int64))(*(_QWORD *)v8 + 328LL))(v8);
      *((_DWORD *)this + 89) = v9;
      if ( v9 )
      {
        if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          kernel_debug(0x52D1C78u, (uintptr_t)this, (unsigned int)v9, 0LL, 1uLL, 0LL);
          v9 = *((_DWORD *)this + 89);
        }
        (*(void (__fastcall **)(IOUSBHIDDriverPM *, _QWORD))(*(_QWORD *)this + 2016LL))(this, (unsigned int)v9);
        v10 = *((_QWORD *)this + 27);
        v11 = (IOService *)IOUSBDevice::GetInterfacePowerParent((IOUSBDevice *)v10);
        *(_QWORD *)(v4 + 264) = v11;
        if ( v11 )
        {
          v10 = (__int64)v11;
          IOService::registerInterestedDriver(v11, (IOService *)v4);
        }
        v12 = v4;
        v13 = IOUSBHIDDriverPM::GetNumberProperty(v10, v4, (__int64)"MaxResponseLatency");
        v14 = 1LL;
        if ( v13 )
        {
          v14 = 1LL;
          if ( *(_QWORD *)(v4 + 264) )
          {
            arg3 = 0LL;
            if ( *(_BYTE *)v5 & 2 )
            {
              LODWORD(v15) = (*(int (__fastcall **)(_QWORD, uintptr_t))(**(_QWORD **)(v4 + 216) + 2480LL))(
                               *(_QWORD *)(v4 + 216),
                               v4);
              if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              {
                v12 = v4;
                kernel_debug(0x52D1C78u, v4, v13, v15, 2uLL, 0LL);
              }
            }
            LODWORD(v16) = (*(int (__fastcall **)(_QWORD, uintptr_t))(**(_QWORD **)(v4 + 216) + 2480LL))(
                             *(_QWORD *)(v4 + 216),
                             v12);
            v12 = (uintptr_t)&arg3;
            v17 = (*(int (__fastcall **)(__int64, uintptr_t *))(*(_QWORD *)v16 + 2216LL))(v16, &arg3);
            if ( !v17 && arg3 && (v18 = *(_BYTE *)(arg3 + 1)) != 0 )
            {
              v12 = arg3 + 16;
              v19 = 0;
              do
              {
                if ( *(_DWORD *)v12 != -1 && *(_DWORD *)v12 <= v13 )
                  break;
                ++v19;
                v12 += 16LL;
              }
              while ( v19 < v18 );
              v14 = 2LL;
              if ( v19 < v18 )
                v14 = *(_QWORD *)(arg3 + 16LL * v19 + 8);
            }
            else
            {
              v14 = 2LL;
              if ( *(_BYTE *)v5 & 2 )
              {
                v14 = 2LL;
                if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
                {
                  v12 = v4;
                  kernel_debug(0x52D1C78u, v4, v17, arg3, 4uLL, 0LL);
                  v14 = 2LL;
                }
              }
            }
          }
        }
        LODWORD(v20) = (*(int (__fastcall **)(_QWORD, uintptr_t))(**(_QWORD **)(v4 + 216) + 2480LL))(
                         *(_QWORD *)(v4 + 216),
                         v12);
        v21 = (*(int (__fastcall **)(__int64))(*(_QWORD *)v20 + 2208LL))(v20);
        if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1C78u, v4, (unsigned int)v21, v14, 3uLL, 0LL);
        if ( v14 != 2 )
        {
          if ( v21 != 2 || v14 != 1 )
            *(_DWORD *)(v4 + 360) = 3;
          else
            *(_DWORD *)(v4 + 360) = 2;
        }
      }
    }
    IOService::changePowerStateTo((IOService *)v4, *(_DWORD *)(v4 + 360));
    v7 = 0;
  }
  if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C7Au, v4, *(_DWORD *)(v4 + 360) | (*(_QWORD *)(v4 + 328) << 16), *(_QWORD *)(v4 + 264), v7, 0LL);
  return (unsigned int)v7;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 6CA0: using guessed type _QWORD ourPowerStates;

//----- (0000000000002E4E) ----------------------------------------------------
char __fastcall IOUSBHIDDriverPM::handleStart(IOUSBHIDDriverPM *this, uintptr_t arg2)
{
  uintptr_t v2; // r14@1
  uintptr_t v3; // rbx@1
  __int64 *v4; // r15@1
  __int64 *v5; // r12@1
  __int64 v6; // rax@6
  __int64 v7; // rdi@7
  __int64 v8; // rax@7
  __int64 v9; // rsi@9
  __int64 v10; // rax@9
  __int64 v11; // rdx@10
  __int64 v12; // rax@11
  __int64 v13; // rcx@13
  signed __int64 v14; // rsi@20
  char v15; // r14@23
  uintptr_t v16; // rdx@23
  uintptr_t v17; // r8@23
  __int64 v18; // rax@29
  int v19; // eax@30
  __int64 v20; // rax@37
  __int64 v21; // rax@38
  void (__fastcall *v22)(_QWORD, _QWORD, _QWORD, _QWORD); // r13@40
  unsigned __int16 v23; // ax@40
  int v24; // eax@41
  __int64 v25; // rax@56
  char v27; // [sp+8h] [bp-88h]@30
  char v28; // [sp+9h] [bp-87h]@30
  __int16 v29; // [sp+Ah] [bp-86h]@30
  __int16 v30; // [sp+Ch] [bp-84h]@30
  __int16 v31; // [sp+Eh] [bp-82h]@30
  char *v32; // [sp+10h] [bp-80h]@30
  int v33; // [sp+18h] [bp-78h]@30
  char v34; // [sp+20h] [bp-70h]@7
  char v35; // [sp+21h] [bp-6Fh]@7
  char v36; // [sp+28h] [bp-68h]@36
  char v37; // [sp+29h] [bp-67h]@36
  __int16 v38; // [sp+2Ah] [bp-66h]@36
  __int16 v39; // [sp+2Ch] [bp-64h]@36
  __int16 v40; // [sp+2Eh] [bp-62h]@36
  __int64 v41; // [sp+30h] [bp-60h]@36
  char v42; // [sp+40h] [bp-50h]@30
  __int64 v43; // [sp+60h] [bp-30h]@1

  v2 = arg2;
  v3 = (uintptr_t)this;
  v4 = off_6028[0];
  v43 = *off_6028[0];
  v5 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C99u, (uintptr_t)this, arg2, *((_QWORD *)this + 26), 0LL, 0LL);
  if ( *((_QWORD *)this + 26) != arg2
    || !(unsigned __int8)(*(int (__fastcall **)(IOUSBHIDDriverPM *, uintptr_t))((int (__fastcall **)(_QWORD, _QWORD))off_6020[0]
                                                                              + 268))(
                           this,
                           arg2) )
    goto LABEL_52;
  LODWORD(v6) = (*(int (**)(void))(**((_QWORD **)this + 26) + 2216LL))();
  *((_QWORD *)this + 27) = v6;
  if ( !v6 )
  {
    if ( !(*(_BYTE *)v5 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_52;
    v15 = 0;
    v16 = 0LL;
    v17 = 0LL;
    goto LABEL_51;
  }
  v7 = v6;
  (*(void (__fastcall **)(__int64))(*(_QWORD *)v6 + 32LL))(v6);
  *(_DWORD *)(v3 + 352) = IOUSBHIDDriverPM::GetNumberProperty(
                            v7,
                            *(_QWORD *)(v3 + 216),
                            (__int64)"kControlNoDataTimeout");
  v34 = 3;
  v35 = 0;
  LODWORD(v8) = (*(int (__fastcall **)(_QWORD, _QWORD, char *))(**(_QWORD **)(v3 + 208) + 2176LL))(
                  *(_QWORD *)(v3 + 208),
                  0LL,
                  &v34);
  *(_QWORD *)(v3 + 232) = v8;
  if ( v8 )
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v8 + 32LL))(v8);
  v34 = 3;
  v35 = 1;
  v9 = 0LL;
  LODWORD(v10) = (*(int (__fastcall **)(_QWORD, _QWORD, char *))(**(_QWORD **)(v3 + 208) + 2176LL))(
                   *(_QWORD *)(v3 + 208),
                   0LL,
                   &v34);
  *(_QWORD *)(v3 + 224) = v10;
  if ( !v10 )
  {
    if ( !(*(_BYTE *)v5 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_52;
    v15 = 0;
    v16 = 0LL;
    v17 = 1LL;
LABEL_51:
    kernel_debug(0x52D1C98u, v3, v16, 0LL, v17, 0LL);
    goto LABEL_53;
  }
  (*(void (__fastcall **)(__int64))(*(_QWORD *)v10 + 32LL))(v10);
  if ( (unsigned __int16)(*(int (**)(void))(**(_QWORD **)(v3 + 216) + 2288LL))() == 1452 )
  {
    v9 = (__int64)"UseStandardRetryCount";
    LODWORD(v12) = (*(int (__fastcall **)(_QWORD, _QWORD))(**(_QWORD **)(v3 + 208) + 696LL))(
                     *(_QWORD *)(v3 + 208),
                     "UseStandardRetryCount");
    if ( v12 != *(_QWORD *)*off_6038[0] && (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 224) + 424LL))() <= 7u )
    {
      v13 = (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 224) + 424LL))();
      v11 = 0x18 % (unsigned int)v13;
      *(_DWORD *)(v3 + 368) = 0x18 / (unsigned int)v13;
      *(_DWORD *)(v3 + 340) = 0x18 / (unsigned int)v13;
    }
  }
  if ( (unsigned __int16)(*(int (__fastcall **)(_QWORD, __int64, __int64))(**(_QWORD **)(v3 + 216) + 2288LL))(
                           *(_QWORD *)(v3 + 216),
                           v9,
                           v11) == 1699 )
    (*(void (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v3 + 2640LL))(v3, 0LL);
  if ( (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2248LL))() == 3
    && (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2256LL))() == 1
    && (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2264LL))() == 1 )
  {
    if ( (unsigned __int16)(*(int (**)(void))(**(_QWORD **)(v3 + 216) + 2288LL))() == 1452 )
      v14 = 0LL;
    else
      v14 = 24LL;
    (*(void (__fastcall **)(uintptr_t, signed __int64))(*(_QWORD *)v3 + 2640LL))(v3, v14);
  }
  LODWORD(v18) = (*(int (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v2 + 696LL))(v2, "SIXAXIS compatibility");
  if ( v18 == *(_QWORD *)*off_6038[0] )
  {
    v27 = -95;
    v28 = 1;
    v29 = 1010;
    v30 = (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2224LL))();
    v31 = 18;
    v32 = &v42;
    v33 = 0;
    v19 = (*(int (__fastcall **)(uintptr_t, char *, _QWORD, _QWORD))(*(_QWORD *)v3 + 2672LL))(
            v3,
            &v27,
            *(_DWORD *)(v3 + 352),
            0LL);
    if ( v19 && *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C98u, v3, v19, 0LL, 3uLL, 0LL);
    if ( (unsigned __int8)IOService::isInactive((IOService *)v3) )
    {
      if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      {
        v15 = 0;
        v16 = 0LL;
        v17 = 4LL;
        goto LABEL_51;
      }
      goto LABEL_52;
    }
  }
  if ( (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2256LL))() == 1 )
  {
    v36 = 33;
    v37 = 11;
    v38 = 1;
    v39 = (unsigned __int8)(*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2224LL))();
    v40 = 0;
    v41 = 0LL;
    (*(void (__fastcall **)(uintptr_t, char *, _QWORD, _QWORD))(*(_QWORD *)v3 + 2672LL))(
      v3,
      &v36,
      *(_DWORD *)(v3 + 352),
      0LL);
  }
  LODWORD(v20) = thread_call_allocate(IOUSBHIDDriverPM::WorkToDo, v3);
  *(_QWORD *)(v3 + 320) = v20;
  if ( !v20 )
  {
    if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v15 = 0;
      v16 = 0LL;
      v17 = 5LL;
      goto LABEL_51;
    }
    goto LABEL_52;
  }
  *(_BYTE *)(v3 + 380) = (*(int (**)(void))(**(_QWORD **)(v3 + 208) + 2224LL))();
  LODWORD(v21) = (*(int (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v3 + 744LL))(v3, "idProduct");
  if ( v21 )
  {
    (*(void (__fastcall **)(__int64))(*(_QWORD *)v21 + 40LL))(v21);
  }
  else
  {
    v22 = *(void (__fastcall **)(_QWORD, _QWORD, _QWORD, _QWORD))(*(_QWORD *)v3 + 640LL);
    v23 = (*(int (**)(void))(**(_QWORD **)(v3 + 216) + 2296LL))();
    v22(v3, "idProduct", v23, 32LL);
  }
  *(_QWORD *)(v3 + 272) = v3;
  *(_QWORD *)(v3 + 280) = IOUSBHIDDriverPM::InterruptReadHandlerEntry;
  *(_QWORD *)(v3 + 288) = 0LL;
  v24 = (*(int (__fastcall **)(uintptr_t, uintptr_t))(*(_QWORD *)v3 + 2664LL))(v3, v2);
  v15 = 1;
  if ( v24 )
  {
    if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v16 = v24;
      v15 = 0;
      v17 = 6LL;
      goto LABEL_51;
    }
LABEL_52:
    v15 = 0;
  }
LABEL_53:
  if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1C9Au, v3, *(_QWORD *)(v3 + 208), *(_QWORD *)(v3 + 216), (unsigned __int8)v15, 0LL);
  v25 = *v4;
  if ( *v4 == v43 )
    LOBYTE(v25) = v15;
  return v25;
}
// 6020: using guessed type __int64 *off_6020[5];
// 6028: using guessed type __int64 *off_6028[4];
// 6030: using guessed type __int64 *off_6030[3];
// 6038: using guessed type __int64 *off_6038[2];
// 6040: using guessed type __int64 *off_6040;
// 10FE0: using guessed type int __fastcall thread_call_allocate(_QWORD, _QWORD);

//----- (00000000000033F2) ----------------------------------------------------
int __usercall IOUSBHIDDriverPM::WorkToDo@<eax>(IOUSBHIDDriverPM *this@<rdi>, __int64 a2@<rax>)
{
  __int64 *v2; // r15@1
  uintptr_t v3; // r14@2
  unsigned __int8 v4; // al@2
  int v5; // er14@4
  __int64 v6; // rax@5
  int v7; // eax@7
  uintptr_t v8; // r15@23
  unsigned __int8 v9; // al@23
  __int64 v11; // [sp-6h] [bp-20h]@1

  v11 = a2;
  BYTE7(v11) = 1;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CC9u, (uintptr_t)this, v3, v4, *((_DWORD *)this + 91), 0LL);
  }
  v5 = 0;
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    v6 = *((_DWORD *)this + 91);
    if ( (_DWORD)v6 == 3 )
    {
      v7 = IOUSBHIDDriverPM::CheckForDeadDevice(this, (bool *)&v11 + 7, v6);
    }
    else if ( (_DWORD)v6 == 2 )
    {
      v7 = IOUSBHIDDriverPM::ClearFeatureEndpointHalt(this);
    }
    else
    {
      v5 = 0;
      if ( (_DWORD)v6 != 1 )
        goto LABEL_12;
      v7 = IOUSBHIDDriverPM::HandleReport(this);
    }
    v5 = v7;
LABEL_12:
    if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(
        0x52D1CC8u,
        (uintptr_t)this,
        v5,
        BYTE7(v11) | ((unsigned __int64)*((_BYTE *)this + 386) << 16),
        0LL,
        0LL);
    *((_DWORD *)this + 91) = 0;
    if ( !*((_BYTE *)this + 386) && *((_QWORD *)this + 28) && BYTE7(v11) )
    {
      if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        kernel_debug(0x52D1CC8u, (uintptr_t)this, 0LL, 0LL, 1uLL, 0LL);
      v5 = (*(int (__fastcall **)(IOUSBHIDDriverPM *))(*(_QWORD *)this + 2648LL))(this);
    }
  }
  if ( *(_BYTE *)v2 & 2 )
  {
    v8 = *((_QWORD *)this + 41);
    v9 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CCAu, (uintptr_t)this, v8, v9, v5, 0LL);
  }
  return (*(int (__fastcall **)(IOUSBHIDDriverPM *))(*(_QWORD *)this + 40LL))(this);
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000003588) ----------------------------------------------------
int __fastcall IOUSBHIDDriverPM::InterruptReadHandlerEntry(IOUSBHIDDriverPM *this, OSObject *a2, void *a3, unsigned int a4, __int64 a5)
{
  __int64 v5; // r14@1
  unsigned int v6; // er15@1
  int v7; // er12@1
  IOUSBHIDDriverPM *v8; // rax@1
  IOUSBHIDDriverPM *v9; // rbx@1

  v5 = a5;
  v6 = a4;
  v7 = (signed int)a3;
  LODWORD(v8) = OSMetaClassBase::safeMetaCast(this, &IOUSBHIDDriverPM::gMetaClass);
  v9 = v8;
  if ( v8 )
  {
    IOUSBHIDDriverPM::InterruptReadHandler(v8, (unsigned int)v7, v6, v5);
    LODWORD(v8) = (*(int (__fastcall **)(IOUSBHIDDriverPM *, _QWORD))(*(_QWORD *)v9 + 40LL))(v9, (unsigned int)v7);
  }
  return (signed int)v8;
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;
// 10880: using guessed type int __fastcall OSMetaClassBase::safeMetaCast(_QWORD, _QWORD);

//----- (00000000000035DC) ----------------------------------------------------
void __fastcall IOUSBHIDDriverPM::handleStop(uintptr_t arg1, IOService *a2)
{
  IOService *v2; // r14@1
  uintptr_t v3; // rbx@1
  __int64 *v4; // r15@1
  __int64 v5; // rdi@4

  v2 = a2;
  v3 = arg1;
  v4 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    a2 = (IOService *)arg1;
    kernel_debug(0x52D1C9Du, arg1, 0LL, 0LL, 0LL, 0LL);
  }
  v5 = *(_QWORD *)(arg1 + 320);
  if ( v5 )
  {
    if ( thread_call_cancel(v5, a2) )
    {
      if ( *(_BYTE *)v4 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      {
        a2 = (IOService *)v3;
        kernel_debug(0x52D1C9Cu, v3, 0LL, 0LL, 0LL, 0LL);
      }
      (*(void (__fastcall **)(uintptr_t, IOService *))(*(_QWORD *)v3 + 40LL))(v3, a2);
    }
    thread_call_free(*(_QWORD *)(v3 + 320));
    *(_QWORD *)(v3 + 320) = 0LL;
  }
  (*(void (__fastcall **)(uintptr_t, IOService *))((void (__fastcall **)(_QWORD, _QWORD))off_6020[0] + 269))(v3, v2);
  if ( *(_BYTE *)v4 & 2 )
  {
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1C9Eu, v3, 0LL, 0LL, 0LL, 0LL);
  }
}
// 6020: using guessed type __int64 *off_6020[5];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 10FE8: using guessed type int __fastcall thread_call_cancel(_QWORD, _QWORD);
// 10FF8: using guessed type int __fastcall thread_call_free(_QWORD);

//----- (00000000000036D4) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::getReport(IOService *this, __int64 a2, unsigned int a3, unsigned __int8 a4)
{
  unsigned int v4; // er12@1
  __int64 v5; // rax@1
  __int64 v6; // r14@1
  uintptr_t v7; // r13@2
  unsigned __int8 v8; // al@2
  __int16 v9; // ax@6
  signed int v10; // er13@6
  unsigned __int16 v11; // cx@7
  unsigned __int64 v12; // rax@7
  signed __int64 v13; // rcx@8
  unsigned __int16 v14; // cx@9
  int v15; // er15@12
  uintptr_t v16; // r14@19
  unsigned __int8 v17; // al@19
  unsigned __int8 v19; // [sp+Ch] [bp-44h]@1
  char v20; // [sp+10h] [bp-40h]@12
  char v21; // [sp+11h] [bp-3Fh]@12
  __int16 v22; // [sp+12h] [bp-3Eh]@12
  __int16 v23; // [sp+14h] [bp-3Ch]@12
  __int16 v24; // [sp+16h] [bp-3Ah]@12
  __int64 v25; // [sp+18h] [bp-38h]@12
  unsigned int v26; // [sp+20h] [bp-30h]@12

  v19 = a4;
  v4 = a3;
  LODWORD(v5) = OSMetaClassBase::safeMetaCast(a2, *off_6010[0]);
  v6 = v5;
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v7 = *((_QWORD *)this + 41);
    v8 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CA1u, (uintptr_t)this, v4, v7, v8, 0LL);
  }
  if ( (unsigned __int8)IOService::isInactive(this) )
  {
    v10 = -536870208;
    goto LABEL_18;
  }
  (*(void (__fastcall **)(IOService *, signed __int64, signed __int64))(*(_QWORD *)this + 1976LL))(this, 1LL, 4LL);
  (*(void (__fastcall **)(IOService *, signed __int64))(*(_QWORD *)this + 2688LL))(this, 1LL);
  (*(void (__fastcall **)(IOService *))(*(_QWORD *)this + 32LL))(this);
  if ( (unsigned __int16)(*(int (**)(void))(**((_QWORD **)this + 27) + 2288LL))() != 1133 )
    goto LABEL_12;
  v9 = (*(int (**)(void))(**((_QWORD **)this + 27) + 2296LL))();
  v10 = -536870201;
  if ( v9 > -15742 )
  {
    v14 = v9 + 15741;
    v12 = (unsigned __int16)(v9 + 15741);
    if ( v14 > 0x12u )
      goto LABEL_12;
    v13 = 458757LL;
  }
  else
  {
    v11 = v9 + 15870;
    v12 = (unsigned __int16)(v9 + 15870);
    if ( v11 > 0x10u )
      goto LABEL_12;
    v13 = 66017LL;
  }
  if ( !_bittest((const unsigned __int64 *)&v13, v12) )
  {
LABEL_12:
    v20 = -95;
    v21 = 1;
    v22 = (((_WORD)v4 << 8) + 256) | v19;
    v23 = (unsigned __int8)(*(int (**)(void))(**((_QWORD **)this + 26) + 2224LL))();
    v24 = (*(int (__fastcall **)(__int64))(*(_QWORD *)a2 + 456LL))(a2);
    v25 = a2;
    v26 = 0;
    v15 = (*(int (__fastcall **)(IOService *, char *, _QWORD, _QWORD))(*(_QWORD *)this + 2680LL))(
            this,
            &v20,
            *((_DWORD *)this + 88),
            0LL);
    v10 = -536870208;
    if ( !(unsigned __int8)IOService::isInactive(this) )
    {
      if ( v6 )
      {
        v10 = v15;
        if ( !v15 )
        {
          (*(void (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v6 + 712LL))(v6, v26);
          v10 = 0;
        }
      }
      else
      {
        v10 = v15;
      }
    }
  }
  (*(void (__fastcall **)(IOService *))(*(_QWORD *)this + 40LL))(this);
LABEL_18:
  (*(void (__fastcall **)(IOService *, _QWORD))(*(_QWORD *)this + 2688LL))(this, 0LL);
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v16 = *((_QWORD *)this + 41);
    v17 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CA2u, (uintptr_t)this, v16, v17, v10, 0LL);
  }
  return (unsigned int)v10;
}
// 6010: using guessed type _QWORD *off_6010[7];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 10880: using guessed type int __fastcall OSMetaClassBase::safeMetaCast(_QWORD, _QWORD);

//----- (0000000000003912) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::setReport(IOService *this, __int64 a2, unsigned int a3, unsigned __int8 a4)
{
  unsigned __int8 v4; // bl@1
  unsigned int v5; // er13@1
  __int64 v6; // r14@1
  uintptr_t v7; // r15@1
  uintptr_t v8; // r12@2
  unsigned __int8 v9; // al@2
  signed __int64 v10; // rsi@5
  __int64 v11; // rdi@5
  int v12; // er12@6
  int v13; // ebx@7
  __int64 v14; // rdi@8
  unsigned __int16 v15; // r13@9
  int v16; // eax@9
  unsigned int v17; // esi@9
  __int64 v18; // rdi@12
  char *v19; // r12@12
  char *v20; // rsi@18
  int v21; // er13@18
  uintptr_t v22; // rax@19
  int v23; // eax@28
  signed int v24; // ebx@32
  uintptr_t v25; // r14@38
  unsigned __int8 v26; // al@38
  unsigned __int8 v28; // [sp+Ch] [bp-44h]@5
  char v29; // [sp+10h] [bp-40h]@32
  char v30; // [sp+11h] [bp-3Fh]@32
  __int16 v31; // [sp+12h] [bp-3Eh]@32
  __int16 v32; // [sp+14h] [bp-3Ch]@32
  __int16 v33; // [sp+16h] [bp-3Ah]@32
  __int64 v34; // [sp+18h] [bp-38h]@32
  int v35; // [sp+20h] [bp-30h]@32

  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = (uintptr_t)this;
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v8 = *((_QWORD *)this + 41);
    v9 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CA5u, (uintptr_t)this, v5, v8, v9, 0LL);
  }
  if ( (unsigned __int8)IOService::isInactive(this) )
  {
    v12 = -536870208;
    goto LABEL_37;
  }
  v28 = v4;
  (*(void (__fastcall **)(IOService *, signed __int64, signed __int64))(*(_QWORD *)this + 1976LL))(this, 1LL, 4LL);
  v10 = 1LL;
  (*(void (__fastcall **)(IOService *, signed __int64))(*(_QWORD *)this + 2688LL))(this, 1LL);
  v11 = *((_QWORD *)this + 30);
  if ( !v11 || (v12 = -536854454, !(unsigned __int8)(*(int (**)(void))(*(_QWORD *)v11 + 304LL))()) )
  {
    (*(void (__fastcall **)(uintptr_t))(*(_QWORD *)v7 + 32LL))(v7);
    v13 = (unsigned __int8)(v5 + 1);
    if ( v13 == 2 )
    {
      v14 = *(_QWORD *)(v7 + 232);
      if ( v14 )
      {
        v15 = (*(int (**)(void))(*(_QWORD *)v14 + 416LL))();
        v16 = (*(int (__fastcall **)(__int64))(*(_QWORD *)v6 + 456LL))(v6);
        v17 = v16;
        if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CA4u, v7, v15, (unsigned int)v16, 2uLL, 0LL);
        v18 = *(_QWORD *)(v7 + 392);
        v19 = 0LL;
        if ( v18 )
        {
          if ( v15 )
          {
            v19 = 0LL;
            if ( *(_DWORD *)v18 )
            {
              v19 = 0LL;
              if ( !(v17 % v15) && v17 < *(_DWORD *)v18 )
                v19 = (char *)IOMemoryDescriptor::withAddress((IOMemoryDescriptor *)(v18 + 4), 0LL, 2uLL, v15);
            }
          }
        }
        v20 = (char *)v6;
        v21 = (*(int (__fastcall **)(_QWORD, __int64, _QWORD))(**(_QWORD **)(v7 + 232) + 328LL))(
                *(_QWORD *)(v7 + 232),
                v6,
                0LL);
        if ( *(_BYTE *)off_6030[0] & 2 )
        {
          LODWORD(v22) = (*(int (__fastcall **)(__int64))(*(_QWORD *)v6 + 456LL))(v6);
          if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v20 = (char *)v7;
            kernel_debug(0x52D1CA4u, v7, v21, v22, 1uLL, 0LL);
          }
        }
        if ( !v21 && v19 )
        {
          if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
            kernel_debug(0x52D1CA4u, v7, **(_DWORD **)(v7 + 392), 0LL, 3uLL, 0LL);
          v20 = v19;
          v21 = (*(int (__fastcall **)(_QWORD, char *, _QWORD))(**(_QWORD **)(v7 + 232) + 328LL))(
                  *(_QWORD *)(v7 + 232),
                  v19,
                  0LL);
          (*(void (__fastcall **)(char *))(*(_QWORD *)v19 + 40LL))(v19);
        }
        v12 = 0;
        if ( !v21 )
          goto LABEL_36;
        v10 = 1LL;
        v23 = (*(int (__fastcall **)(_QWORD, signed __int64))(**(_QWORD **)(v7 + 232) + 488LL))(
                *(_QWORD *)(v7 + 232),
                1LL);
        if ( v23 && *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          v10 = v7;
          kernel_debug(0x52D1CA4u, v7, v23, 0LL, 0LL, 0LL);
        }
      }
    }
    v29 = 33;
    v30 = 9;
    v31 = ((_WORD)v13 << 8) | v28;
    v32 = (unsigned __int8)(*(int (__fastcall **)(_QWORD, signed __int64))(**(_QWORD **)(v7 + 208) + 2224LL))(
                             *(_QWORD *)(v7 + 208),
                             v10);
    v33 = (*(int (__fastcall **)(__int64))(*(_QWORD *)v6 + 456LL))(v6);
    v34 = v6;
    v35 = 0;
    v20 = &v29;
    v24 = 0;
    v12 = (*(int (__fastcall **)(uintptr_t, char *, _QWORD, _QWORD))(*(_QWORD *)v7 + 2680LL))(
            v7,
            &v29,
            *(_DWORD *)(v7 + 352),
            0LL);
    if ( v12 )
    {
      if ( *(_BYTE *)off_6030[0] & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      {
        v20 = (char *)v7;
        kernel_debug(0x52D1CA4u, v7, v12, 0LL, 1uLL, 0LL);
      }
    }
    else
    {
      if ( (unsigned __int8)IOService::isInactive((IOService *)v7) )
        v24 = -536870208;
      v12 = v24;
    }
LABEL_36:
    (*(void (__fastcall **)(uintptr_t, char *))(*(_QWORD *)v7 + 40LL))(v7, v20);
  }
LABEL_37:
  (*(void (__fastcall **)(uintptr_t, _QWORD))(*(_QWORD *)v7 + 2688LL))(v7, 0LL);
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v25 = *(_QWORD *)(v7 + 328);
    v26 = IOService::isInactive((IOService *)v7);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CA6u, v7, v25, v26, v12, 0LL);
  }
  return (unsigned int)v12;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000003CF6) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newLocationIDNumber(IOUSBHIDDriverPM *this)
{
  __int64 v1; // rsi@1
  unsigned int v2; // eax@2
  unsigned int v3; // edx@2
  __int64 result; // rax@3

  v1 = *((_QWORD *)this + 26);
  if ( v1 && (v2 = IOUSBHIDDriverPM::GetNumberProperty((__int64)this, v1, (__int64)"locationID")) != 0 )
    result = OSNumber::withNumber((OSNumber *)v2, 0x20uLL, v3);
  else
    result = 0LL;
  return result;
}

//----- (0000000000003D28) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newManufacturerString(IOUSBHIDDriverPM *this)
{
  __int64 *v1; // r15@1
  unsigned __int8 v2; // al@1
  const char *v3; // rsi@1
  __int64 result; // rax@1
  __int64 v5; // rcx@1
  unsigned int v6; // [sp+Ch] [bp-124h]@1
  unsigned __int8 v7; // [sp+10h] [bp-120h]@1
  __int64 v8; // [sp+110h] [bp-20h]@1

  v1 = off_6028[0];
  v8 = *off_6028[0];
  v7 = 0;
  v2 = (*(int (**)(void))(**((_QWORD **)this + 27) + 2320LL))();
  v6 = 256;
  v3 = (const char *)v2;
  IOUSBHIDDriverPM::GetIndexedString(this, v2, &v7, &v6, 1033);
  result = OSString::withCString((OSString *)&v7, v3);
  v5 = *v1;
  return result;
}
// 6028: using guessed type __int64 *off_6028[4];

//----- (0000000000003DB0) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::GetIndexedString(IOUSBHIDDriverPM *this, unsigned __int8 a2, unsigned __int8 *a3, unsigned int *a4, signed __int16 a5)
{
  signed __int16 v5; // r13@1
  unsigned int *v6; // r14@1
  uintptr_t v7; // r15@2
  unsigned __int8 v8; // al@2
  int v9; // er15@4
  signed __int16 v10; // ax@5
  unsigned int v11; // ebx@8
  uintptr_t v12; // rbx@15
  unsigned __int8 v13; // al@15
  __int64 result; // rax@17
  char *v15; // [sp+0h] [bp-140h]@1
  unsigned int v16; // [sp+Ch] [bp-134h]@1
  char v17; // [sp+10h] [bp-130h]@7
  __int64 v18; // [sp+110h] [bp-30h]@1

  v5 = a5;
  v6 = a4;
  v15 = (char *)a3;
  v18 = *off_6028[0];
  v16 = *a4;
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v7 = *((_QWORD *)this + 41);
    v8 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CBDu, (uintptr_t)this, v7, v8, a2, 0LL);
  }
  v9 = -536870206;
  if ( a2 )
  {
    v10 = 1033;
    if ( v5 )
      v10 = v5;
    v9 = (*(int (__fastcall **)(_QWORD, _QWORD, char *, signed __int64, _QWORD))(**((_QWORD **)this + 27) + 2392LL))(
           *((_QWORD *)this + 27),
           a2,
           &v17,
           255LL,
           (unsigned __int16)v10);
    if ( !v9 )
    {
      v11 = 0;
      if ( v17 )
        v11 = (unsigned __int16)(strlen(&v17) + 1);
      if ( !v16 )
        goto LABEL_13;
      v9 = -536870175;
      if ( v16 >= v11 )
      {
        strlcpy(v15, &v17, off_6048);
LABEL_13:
        *v6 = v11;
        v9 = 0;
        goto LABEL_14;
      }
    }
  }
LABEL_14:
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v12 = *((_QWORD *)this + 41);
    v13 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CBEu, (uintptr_t)this, v12, v13, v9, 0LL);
  }
  result = *off_6028[0];
  if ( *off_6028[0] == v18 )
    result = 0LL;
  return result;
}
// 6028: using guessed type __int64 *off_6028[4];
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000003F38) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newProductIDNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3)
{
  __int64 v3; // rax@1
  OSNumber *v4; // rdi@1

  v3 = *((_QWORD *)this + 27);
  v4 = 0LL;
  if ( v3 )
    v4 = (OSNumber *)(unsigned __int16)(*(int (__fastcall **)(__int64))(*(_QWORD *)v3 + 2296LL))(v3);
  return OSNumber::withNumber(v4, 0x10uLL, a3);
}

//----- (0000000000003F64) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newProductString(IOUSBHIDDriverPM *this)
{
  __int64 *v1; // r15@1
  unsigned __int8 v2; // al@1
  const char *v3; // rsi@1
  __int64 result; // rax@1
  __int64 v5; // rcx@1
  unsigned int v6; // [sp+Ch] [bp-124h]@1
  unsigned __int8 v7; // [sp+10h] [bp-120h]@1
  __int64 v8; // [sp+110h] [bp-20h]@1

  v1 = off_6028[0];
  v8 = *off_6028[0];
  v7 = 0;
  v2 = (*(int (**)(void))(**((_QWORD **)this + 27) + 2328LL))();
  v6 = 256;
  v3 = (const char *)v2;
  IOUSBHIDDriverPM::GetIndexedString(this, v2, &v7, &v6, 1033);
  result = OSString::withCString((OSString *)&v7, v3);
  v5 = *v1;
  return result;
}
// 6028: using guessed type __int64 *off_6028[4];

//----- (0000000000003FEC) ----------------------------------------------------
__int64 __usercall IOUSBHIDDriverPM::newReportDescriptor@<rax>(IOUSBHIDDriverPM *this@<rdi>, IOMemoryDescriptor **a2@<rsi>, __int64 a3@<rax>)
{
  IOMemoryDescriptor *v3; // r13@1
  bool v4; // cl@1
  unsigned int v5; // ebx@1
  IOMemoryDescriptor *v6; // r12@3
  unsigned __int8 *v7; // rax@4
  unsigned int v8; // er15@4
  __int64 v10; // [sp-4h] [bp-30h]@1

  v10 = a3;
  HIDWORD(v10) = 0;
  v3 = 0LL;
  v5 = IOUSBHIDDriverPM::GetHIDDescriptor(this, 0x22u, 0, 0LL, (unsigned int *)&v10 + 1);
  if ( !v5 )
  {
    if ( HIDWORD(v10) )
    {
      v5 = 0;
      v6 = (IOMemoryDescriptor *)IOBufferMemoryDescriptor::withCapacity(
                                   (IOBufferMemoryDescriptor *)HIDWORD(v10),
                                   3uLL,
                                   0,
                                   v4);
      v3 = 0LL;
      if ( v6 )
      {
        LODWORD(v7) = (*(int (__fastcall **)(IOMemoryDescriptor *, signed __int64))(*(_QWORD *)v6 + 736LL))(v6, 3LL);
        v5 = 0;
        v8 = IOUSBHIDDriverPM::GetHIDDescriptor(this, 0x22u, 0, v7, (unsigned int *)&v10 + 1);
        if ( v8 )
        {
          (*(void (__fastcall **)(IOMemoryDescriptor *, signed __int64))(*(_QWORD *)v6 + 40LL))(v6, 34LL);
          v3 = 0LL;
          v5 = v8;
        }
        else
        {
          v3 = v6;
        }
      }
    }
  }
  *a2 = v3;
  return v5;
}

//----- (000000000000409C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::GetHIDDescriptor(IOUSBHIDDriverPM *this, unsigned __int8 a2, int a3, unsigned __int8 *a4, unsigned int *a5)
{
  unsigned int *v5; // r12@1
  unsigned __int8 v6; // r14@1
  IOService *v7; // r15@1
  uintptr_t v8; // rbx@2
  unsigned __int8 v9; // al@2
  int v10; // er13@4
  __int64 v11; // rdi@5
  __int64 v12; // rax@6
  __int64 v13; // rdx@6
  __int64 v14; // r8@7
  unsigned __int16 v15; // r10@7
  unsigned __int8 v16; // r11@10
  __int64 v17; // r9@11
  signed __int64 v18; // rax@11
  __int64 v19; // rsi@11
  char v20; // di@11
  unsigned __int8 v21; // cl@11
  char v22; // bl@14
  char v23; // cl@19
  size_t v24; // rdx@26
  __int64 v25; // rcx@30
  __int16 v26; // bx@30
  int v27; // er12@34
  uintptr_t v28; // rbx@40
  unsigned __int8 v29; // al@40
  unsigned __int8 *v31; // [sp+0h] [bp-50h]@1
  int v32; // [sp+Ch] [bp-44h]@1
  char v33; // [sp+10h] [bp-40h]@34
  char v34; // [sp+11h] [bp-3Fh]@34
  __int16 v35; // [sp+12h] [bp-3Eh]@34
  __int16 v36; // [sp+14h] [bp-3Ch]@34
  __int16 v37; // [sp+16h] [bp-3Ah]@34
  unsigned __int8 *v38; // [sp+18h] [bp-38h]@34
  int v39; // [sp+20h] [bp-30h]@34

  v5 = a5;
  v31 = a4;
  v32 = a3;
  v6 = a2;
  v7 = this;
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v8 = *((_QWORD *)this + 41);
    v9 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CB9u, (uintptr_t)this, v8, v9, 0LL, 0LL);
  }
  v10 = -536870206;
  if ( v5 )
  {
    v11 = *((_QWORD *)this + 26);
    v10 = -536870160;
    if ( v11 )
    {
      LODWORD(v12) = (*(int (__fastcall **)(__int64, _QWORD, signed __int64))(*(_QWORD *)v11 + 2184LL))(v11, 0LL, 33LL);
      if ( v12 )
      {
        v14 = *v5;
        v15 = a2;
        if ( a2 != 33 && (a2 || (_BYTE)v32) )
        {
          v16 = *(_BYTE *)(v12 + 5);
          if ( v16 )
          {
            v17 = (unsigned int)(unsigned __int8)v32 - 1;
            v18 = v12 + 8;
            v19 = 0LL;
            v20 = 0;
            v21 = 0;
            while ( 1 )
            {
              if ( v6 )
              {
                v13 = *(_BYTE *)(v18 - 2);
                if ( (_DWORD)v13 == v6 )
                {
                  v13 = v21;
                  v22 = 1;
                  if ( v21 != v32 )
                    v22 = v20;
                  LOBYTE(v13) = v21 + (v21 != v32);
                  v20 = v22;
                }
                else
                {
                  LOBYTE(v13) = v21;
                }
              }
              else
              {
                LOBYTE(v13) = v19;
                if ( (_DWORD)v17 != (_DWORD)v19 )
                  LOBYTE(v13) = v21;
                v23 = 1;
                if ( (_DWORD)v17 != (_DWORD)v19 )
                  v23 = v20;
                v20 = v23;
              }
              if ( v20 & 1 )
                break;
              v19 = (unsigned int)(v19 + 1);
              v18 += 3LL;
              v21 = v13;
              if ( (unsigned __int8)v19 >= (unsigned int)v16 )
                goto LABEL_39;
            }
            v25 = (unsigned int)*(_BYTE *)v18 << 8;
            v26 = (*(_BYTE *)v18 << 8) | *(_BYTE *)(v18 - 1);
            *v5 = (unsigned __int16)v26;
            v10 = 0;
            if ( (_DWORD)v14 )
            {
              v10 = -536870181;
              if ( (unsigned __int16)v26 <= (unsigned int)v14 )
              {
                v10 = -536870206;
                if ( v31 )
                {
                  v10 = -536870160;
                  if ( *((_QWORD *)v7 + 27) )
                  {
                    v33 = -127;
                    v34 = 6;
                    v27 = (v15 << 8) | (unsigned __int8)v13;
                    v35 = (v15 << 8) | (unsigned __int8)v13;
                    v36 = (unsigned __int8)(*(int (__fastcall **)(_QWORD, __int64, __int64, __int64, __int64, __int64))(**((_QWORD **)v7 + 26) + 2224LL))(
                                             *((_QWORD *)v7 + 26),
                                             v19,
                                             v13,
                                             v25,
                                             v14,
                                             v17);
                    v37 = v26;
                    v38 = v31;
                    v39 = 0;
                    v10 = (*(int (__fastcall **)(IOService *, char *, _QWORD, _QWORD))(*(_QWORD *)v7 + 2672LL))(
                            v7,
                            &v33,
                            *((_DWORD *)v7 + 88),
                            0LL);
                    if ( v10 == -536854449 )
                    {
                      IOSleep(100LL);
                      v10 = (*(int (__fastcall **)(IOService *, char *, _QWORD, _QWORD))(*(_QWORD *)v7 + 2672LL))(
                              v7,
                              &v33,
                              *((_DWORD *)v7 + 88),
                              0LL);
                    }
                    if ( !v10 && v39 != (unsigned __int16)v26 )
                    {
                      IOSleep(100LL);
                      v33 = -127;
                      v34 = 6;
                      v35 = v27;
                      v36 = (unsigned __int8)(*(int (**)(void))(**((_QWORD **)v7 + 26) + 2224LL))();
                      v37 = v26;
                      v38 = v31;
                      v39 = 0;
                      v10 = (*(int (__fastcall **)(IOService *, char *, _QWORD, _QWORD))(*(_QWORD *)v7 + 2672LL))(
                              v7,
                              &v33,
                              *((_DWORD *)v7 + 88),
                              0LL);
                    }
                  }
                }
              }
            }
          }
        }
        else
        {
          v24 = *(_BYTE *)v12;
          *v5 = v24;
          v10 = 0;
          if ( (_DWORD)v14 )
          {
            v10 = -536870181;
            if ( (unsigned int)v24 <= (unsigned int)v14 )
            {
              v10 = -536870206;
              if ( v31 )
              {
                memcpy(v31, (const void *)v12, v24);
                v10 = 0;
              }
            }
          }
        }
      }
    }
  }
LABEL_39:
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v28 = *((_QWORD *)v7 + 41);
    v29 = IOService::isInactive(v7);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CBAu, (uintptr_t)v7, v28, v29, v10, 0LL);
  }
  return (unsigned int)v10;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 104B0: using guessed type int __fastcall IOSleep(_QWORD);

//----- (00000000000043C2) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newSerialNumberString(IOUSBHIDDriverPM *this)
{
  __int64 *v1; // r15@1
  unsigned __int8 v2; // al@1
  const char *v3; // rsi@1
  __int64 result; // rax@1
  __int64 v5; // rcx@1
  unsigned int v6; // [sp+Ch] [bp-124h]@1
  unsigned __int8 v7; // [sp+10h] [bp-120h]@1
  __int64 v8; // [sp+110h] [bp-20h]@1

  v1 = off_6028[0];
  v8 = *off_6028[0];
  v7 = 0;
  v2 = (*(int (**)(void))(**((_QWORD **)this + 27) + 2336LL))();
  v6 = 256;
  v3 = (const char *)v2;
  IOUSBHIDDriverPM::GetIndexedString(this, v2, &v7, &v6, 1033);
  result = OSString::withCString((OSString *)&v7, v3);
  v5 = *v1;
  return result;
}
// 6028: using guessed type __int64 *off_6028[4];

//----- (000000000000444A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newTransportString(IOUSBHIDDriverPM *this, const char *a2)
{
  return OSString::withCString("USB", a2);
}

//----- (000000000000445C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newVendorIDNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3)
{
  __int64 v3; // rax@1
  OSNumber *v4; // rdi@1

  v3 = *((_QWORD *)this + 27);
  v4 = 0LL;
  if ( v3 )
    v4 = (OSNumber *)(unsigned __int16)(*(int (__fastcall **)(__int64))(*(_QWORD *)v3 + 2288LL))(v3);
  return OSNumber::withNumber(v4, 0x10uLL, a3);
}

//----- (0000000000004488) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newVersionNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3)
{
  __int64 v3; // rax@1
  OSNumber *v4; // rdi@1

  v3 = *((_QWORD *)this + 27);
  v4 = 0LL;
  if ( v3 )
    v4 = (OSNumber *)(unsigned __int16)(*(int (__fastcall **)(__int64))(*(_QWORD *)v3 + 2304LL))(v3);
  return OSNumber::withNumber(v4, 0x10uLL, a3);
}

//----- (00000000000044B4) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newCountryCodeNumber(IOUSBHIDDriverPM *this)
{
  __int64 v1; // rdi@1
  __int64 v2; // rax@2
  unsigned int v3; // edx@2
  __int64 result; // rax@3

  v1 = *((_QWORD *)this + 26);
  if ( v1
    && (LODWORD(v2) = (*(int (__fastcall **)(__int64, _QWORD, signed __int64))(*(_QWORD *)v1 + 2184LL))(v1, 0LL, 33LL),
        v2) )
    result = OSNumber::withNumber((OSNumber *)*(_BYTE *)(v2 + 4), 8uLL, v3);
  else
    result = 0LL;
  return result;
}

//----- (00000000000044EC) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newReportIntervalNumber(IOUSBHIDDriverPM *this, __int64 a2, unsigned int a3)
{
  __int64 v3; // rax@1
  signed __int64 v4; // rdi@1
  unsigned int v5; // eax@2

  v3 = *((_QWORD *)this + 28);
  v4 = 8000LL;
  if ( v3 )
  {
    LOBYTE(v5) = (*(int (__fastcall **)(__int64))(*(_QWORD *)v3 + 424LL))(v3);
    v4 = 32000LL;
    if ( (unsigned __int8)v5 <= 0x1Fu )
    {
      v5 = (unsigned __int8)v5;
      v4 = 16000LL;
      if ( (unsigned __int8)v5 <= 0xFu )
      {
        v4 = 8000LL;
        if ( v5 <= 7 )
        {
          v4 = 4000LL;
          if ( v5 <= 3 )
          {
            v4 = 1000LL;
            if ( v5 > 1 )
              v4 = 2000LL;
          }
        }
      }
    }
  }
  return OSNumber::withNumber((OSNumber *)v4, 0x20uLL, a3);
}

//----- (0000000000004558) ----------------------------------------------------
void __fastcall IOUSBHIDDriverPM::InterruptReadHandler(IOUSBHIDDriverPM *this, uintptr_t a2, unsigned int a3, __int64 a4)
{
  __int64 v4; // rbx@1
  signed int v5; // er14@1
  uintptr_t v6; // r12@1
  __int64 *v7; // r15@1
  uintptr_t v8; // r13@2
  unsigned __int8 v9; // al@2
  __int64 *v10; // r13@4
  uintptr_t v11; // rcx@8
  uintptr_t v12; // rdx@8
  uintptr_t v13; // r8@8
  __int64 v14; // rdi@9
  uintptr_t v15; // rax@9
  char v16; // al@19
  char v17; // cl@19
  __int64 v18; // rbx@30
  void (__fastcall *v19)(_QWORD, _QWORD); // r13@31
  __int64 v20; // rax@31
  uintptr_t v21; // rax@32
  __int64 v22; // rdi@34
  __int64 v23; // rax@35
  uintptr_t v24; // r8@38
  int v25; // eax@44
  uintptr_t v26; // rdx@47
  uintptr_t v27; // r8@47
  int v28; // eax@57
  uintptr_t v29; // rbx@76
  unsigned __int8 v30; // al@76
  unsigned int v31; // [sp+0h] [bp-2Ch]@1

  v4 = a4;
  v31 = a3;
  v5 = a2;
  v6 = (uintptr_t)this;
  v7 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v8 = *((_QWORD *)this + 41);
    v9 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      a2 = (uintptr_t)this;
      kernel_debug(0x52D1CA9u, (uintptr_t)this, v8, v9, 0LL, 0LL);
    }
  }
  v10 = v7;
  if ( (unsigned __int8)IOService::isInactive(this) )
    goto LABEL_75;
  *((_BYTE *)this + 382) = 0;
  *((_QWORD *)this + 37) = v4;
  if ( v5 )
  {
    if ( *(_BYTE *)v7 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v11 = *((_BYTE *)this + 386);
      v12 = v5;
      v13 = 1LL;
      a2 = (uintptr_t)this;
LABEL_14:
      kernel_debug(0x52D1CA8u, a2, v12, v11, v13, 0LL);
      goto LABEL_15;
    }
  }
  else
  {
    v14 = *((_QWORD *)this + 32);
    v15 = 0LL;
    if ( v14 )
      LODWORD(v15) = (*(int (__fastcall **)(__int64, uintptr_t))(*(_QWORD *)v14 + 728LL))(v14, a2);
    if ( *(_BYTE *)v7 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v12 = v15 - v31;
      v13 = 0LL;
      a2 = v6;
      v11 = v15;
      goto LABEL_14;
    }
  }
LABEL_15:
  *(_BYTE *)(v6 + 381) = 0;
  if ( v5 >= 0 )
  {
    if ( !v5 )
    {
LABEL_29:
      *(_DWORD *)(v6 + 340) = *(_DWORD *)(v6 + 368);
      *(_BYTE *)(v6 + 386) = 0;
      if ( v31 )
      {
        v18 = *(_QWORD *)(v6 + 256);
        if ( v18 )
        {
          v19 = *(void (__fastcall **)(_QWORD, _QWORD))(*(_QWORD *)v18 + 712LL);
          LODWORD(v20) = (*(int (__fastcall **)(_QWORD, uintptr_t))(*(_QWORD *)v18 + 728LL))(*(_QWORD *)(v6 + 256), a2);
          a2 = v20 - v31;
          v19(v18, a2);
          v10 = v7;
          if ( *(_BYTE *)v7 & 2 )
          {
            LODWORD(v21) = (*(int (__cdecl **)(_QWORD))(**(_QWORD **)(v6 + 256) + 456LL))(*(_QWORD *)(v6 + 256));
            if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
            {
              a2 = v6;
              kernel_debug(0x52D1CA8u, v6, v21, 0LL, 2uLL, 0LL);
            }
          }
        }
      }
      v22 = *(_QWORD *)(v6 + 256);
      if ( !v22
        || (LODWORD(v23) = (*(int (__fastcall **)(__int64, uintptr_t))(*(_QWORD *)v22 + 728LL))(v22, a2), v31 == v23) )
      {
        if ( !(*(_BYTE *)v10 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
          goto LABEL_40;
        v24 = 4LL;
        goto LABEL_39;
      }
      (*(void (__fastcall **)(uintptr_t, signed __int64, signed __int64))(*(_QWORD *)v6 + 1976LL))(v6, 1LL, 4LL);
      v25 = IOUSBHIDDriverPM::ScheduleWork((IOUSBHIDDriverPM *)v6, 1uLL);
      if ( !v25 || !(*(_BYTE *)v10 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
        goto LABEL_75;
      v26 = v25;
      v27 = 3LL;
LABEL_74:
      kernel_debug(0x52D1CA8u, v6, v26, 0LL, v27, 0LL);
      goto LABEL_75;
    }
LABEL_61:
    if ( (unsigned __int8)IOService::isInactive((IOService *)v6) || !*(_QWORD *)(v6 + 224) )
      goto LABEL_75;
    if ( *(_BYTE *)v7 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CA8u, v6, 0LL, 0LL, 0xAuLL, 0LL);
    if ( !(unsigned int)IOUSBHIDDriverPM::ScheduleWork((IOUSBHIDDriverPM *)v6, 2uLL)
      || !(*(_BYTE *)v7 & 2)
      || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_75;
    v26 = 0LL;
    v27 = 11LL;
    goto LABEL_74;
  }
  if ( v5 > -536854454 )
  {
    if ( v5 == -536854453 )
      goto LABEL_49;
    goto LABEL_61;
  }
  if ( v5 == -536870168 )
  {
    if ( !(unsigned __int8)IOService::isInactive((IOService *)v6) && *(_QWORD *)(v6 + 224) )
      *(_BYTE *)(v6 + 381) = 1;
    goto LABEL_29;
  }
  if ( v5 != -536870165 )
  {
    if ( v5 == -536870163 )
    {
LABEL_49:
      if ( *(_QWORD *)(v6 + 328) < 4uLL
        || *(_BYTE *)(v6 + 383)
        || *(_BYTE *)(v6 + 386)
        || (unsigned __int8)IOService::isInactive((IOService *)v6)
        || !*(_QWORD *)(v6 + 224) )
        goto LABEL_75;
      if ( *(_BYTE *)v7 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        kernel_debug(0x52D1CA8u, v6, 0LL, 0LL, 6uLL, 0LL);
      v28 = IOUSBHIDDriverPM::ScheduleWork((IOUSBHIDDriverPM *)v6, 3uLL);
      if ( !v28 || !(*(_BYTE *)v7 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
        goto LABEL_75;
      v26 = v28;
      v27 = 7LL;
      goto LABEL_74;
    }
    goto LABEL_61;
  }
  v16 = IOService::isInactive((IOService *)v6);
  v17 = *(_BYTE *)(v6 + 385);
  if ( !v16 )
  {
    if ( v17 )
      goto LABEL_71;
    if ( !*(_QWORD *)(v6 + 224) )
      goto LABEL_75;
    if ( !(*(_BYTE *)v7 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
    {
LABEL_40:
      if ( *(_BYTE *)v10 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      {
        a2 = v6;
        kernel_debug(0x52D1CA8u, v6, v5, 0LL, 0xCuLL, 0LL);
      }
      (*(void (__fastcall **)(uintptr_t, uintptr_t))(*(_QWORD *)v6 + 2648LL))(v6, a2);
      goto LABEL_75;
    }
    v24 = 8LL;
LABEL_39:
    a2 = v6;
    kernel_debug(0x52D1CA8u, v6, 0LL, 0LL, v24, 0LL);
    goto LABEL_40;
  }
  if ( !v17 )
    goto LABEL_75;
LABEL_71:
  if ( *(_BYTE *)v7 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    v26 = 0LL;
    v27 = 9LL;
    goto LABEL_74;
  }
LABEL_75:
  if ( *(_BYTE *)v10 & 2 )
  {
    v29 = *(_QWORD *)(v6 + 328);
    v30 = IOService::isInactive((IOService *)v6);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CAAu, v6, v29, v30, 0LL, 0LL);
  }
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000004A9C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::ScheduleWork(IOUSBHIDDriverPM *this, uintptr_t arg4)
{
  __int64 *v2; // r12@1
  uintptr_t v3; // r14@2
  unsigned __int8 v4; // al@2
  signed int v5; // er14@4
  uintptr_t v6; // r15@15
  unsigned __int8 v7; // al@15

  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CCDu, (uintptr_t)this, v3, v4, (unsigned int)arg4, 0LL);
  }
  v5 = 0;
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    v5 = 0;
    arg4 = (unsigned int)arg4;
    if ( (unsigned __int8)OSCompareAndSwap(0LL, (unsigned int)arg4, (char *)this + 364) )
    {
      (*(void (__fastcall **)(IOUSBHIDDriverPM *))(*(_QWORD *)this + 32LL))(this);
      if ( thread_call_enter(*((_QWORD *)this + 40)) == 1 )
      {
        if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          arg4 = (uintptr_t)this;
          kernel_debug(0x52D1CCCu, (uintptr_t)this, 0LL, 0LL, 0LL, 0LL);
        }
        (*(void (__fastcall **)(IOUSBHIDDriverPM *, uintptr_t))(*(_QWORD *)this + 40LL))(this, arg4);
        *((_DWORD *)this + 91) = 0;
        v5 = -536870201;
      }
    }
    else if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v5 = 0;
      kernel_debug(0x52D1CCCu, (uintptr_t)this, *((_DWORD *)this + 91), 0LL, 1uLL, 0LL);
    }
  }
  if ( *(_BYTE *)v2 & 2 )
  {
    v6 = *((_QWORD *)this + 41);
    v7 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CCEu, (uintptr_t)this, v6, v7, v5, 0LL);
  }
  return (unsigned int)v5;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 104B8: using guessed type int __fastcall OSCompareAndSwap(_QWORD, _QWORD, _QWORD);
// 10FF0: using guessed type int __fastcall thread_call_enter(_QWORD);

//----- (0000000000004C00) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::HandleReport(IOUSBHIDDriverPM *this)
{
  uintptr_t v1; // rbx@1
  __int64 *v2; // r15@1
  uintptr_t v3; // r14@2
  unsigned __int8 v4; // al@2
  int v5; // er14@4
  __int64 v6; // rax@5
  uintptr_t v7; // rax@7
  uintptr_t v8; // r14@7
  uintptr_t v9; // rax@7
  uintptr_t v10; // rax@10
  __int64 v11; // rdi@14
  unsigned __int8 v12; // al@18
  uintptr_t v13; // r15@21
  unsigned __int8 v14; // al@21

  v1 = (uintptr_t)this;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CB5u, (uintptr_t)this, v3, v4, 0LL, 0LL);
  }
  v5 = 0;
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    LODWORD(v6) = (*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 32) + 456LL))(*((_QWORD *)this + 32));
    v5 = 0;
    if ( v6 )
    {
      (*(void (__fastcall **)(IOUSBHIDDriverPM *, signed __int64))(*(_QWORD *)this + 2688LL))(this, 1LL);
      if ( *(_BYTE *)v2 & 2 )
      {
        LODWORD(v7) = (*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 32) + 456LL))(*((_QWORD *)this + 32));
        v8 = v7;
        LODWORD(v9) = (*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 32) + 728LL))(*((_QWORD *)this + 32));
        if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CB4u, (uintptr_t)this, v8, v9, 0LL, 0LL);
      }
      v5 = (*(int (__fastcall **)(IOUSBHIDDriverPM *, _QWORD, _QWORD, _QWORD))(*(_QWORD *)this + 2232LL))(
             this,
             *((_QWORD *)this + 32),
             0LL,
             0LL);
      if ( *(_BYTE *)v2 & 2 )
      {
        LODWORD(v10) = (*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 32) + 456LL))(*((_QWORD *)this + 32));
        if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CB4u, (uintptr_t)this, v10, v5, 1uLL, 0LL);
      }
      (*(void (__fastcall **)(IOUSBHIDDriverPM *, _QWORD))(*(_QWORD *)this + 2688LL))(this, 0LL);
    }
    if ( !(unsigned __int8)IOService::isInactive(this) )
    {
      v11 = *((_QWORD *)this + 28);
      if ( v11 )
      {
        if ( *(_BYTE *)(v1 + 381) )
          v5 = (*(int (__fastcall **)(__int64, signed __int64))(*(_QWORD *)v11 + 488LL))(v11, 1LL);
      }
      else if ( *(_BYTE *)v2 & 2 )
      {
        v12 = IOService::isInactive((IOService *)v1);
        if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CB4u, v1, v5, v12, 2uLL, 0LL);
      }
    }
  }
  if ( *(_BYTE *)v2 & 2 )
  {
    v13 = *(_QWORD *)(v1 + 328);
    v14 = IOService::isInactive((IOService *)v1);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CB6u, v1, v13, v14, v5, 0LL);
  }
  return (unsigned int)v5;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000004E04) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::ClearFeatureEndpointHalt(IOUSBHIDDriverPM *this)
{
  uintptr_t v1; // rbx@1
  __int64 *v2; // r15@1
  uintptr_t v3; // r14@2
  unsigned __int8 v4; // al@2
  int v5; // er14@4
  __int64 v6; // rdi@5
  uintptr_t v7; // r15@8
  unsigned __int8 v8; // al@8

  v1 = (uintptr_t)this;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CB1u, (uintptr_t)this, v3, v4, 0LL, 0LL);
  }
  v5 = -536870208;
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    v6 = *((_QWORD *)this + 28);
    if ( v6 )
    {
      v5 = (*(int (__fastcall **)(__int64, signed __int64))(*(_QWORD *)v6 + 488LL))(v6, 1LL);
    }
    else if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      kernel_debug(0x52D1CB0u, v1, 0LL, 0LL, 0LL, 0LL);
    }
  }
  if ( *(_BYTE *)v2 & 2 )
  {
    v7 = *(_QWORD *)(v1 + 328);
    v8 = IOService::isInactive((IOService *)v1);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CB2u, v1, v7, v8, v5, 0LL);
  }
  return (unsigned int)v5;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000004EFE) ----------------------------------------------------
__int64 __usercall IOUSBHIDDriverPM::CheckForDeadDevice@<rax>(IOUSBHIDDriverPM *this@<rdi>, bool *a2@<rsi>, __int64 a3@<rax>)
{
  bool *v3; // r14@1
  uintptr_t v4; // r12@1
  __int64 *v5; // r13@1
  uintptr_t v6; // rbx@2
  unsigned __int8 v7; // al@2
  __int64 v8; // rdi@8
  char *v9; // rsi@9
  int v10; // er15@9
  int v11; // eax@10
  int v12; // eax@14
  int v13; // eax@15
  uintptr_t v14; // rdx@18
  uintptr_t v15; // r8@18
  int v16; // eax@32
  int v17; // eax@33
  __int64 v18; // rdi@42
  __int64 v19; // rdi@44
  uintptr_t v20; // rbx@57
  unsigned __int8 v21; // al@57
  __int64 v23; // [sp-4h] [bp-30h]@1

  v23 = a3;
  v3 = a2;
  v4 = (uintptr_t)this;
  v5 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v6 = *((_QWORD *)this + 41);
    v7 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      a2 = (bool *)this;
      kernel_debug(0x52D1CADu, (uintptr_t)this, v6, v7, 0LL, 0LL);
    }
  }
  if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
  {
    a2 = (bool *)this;
    kernel_debug(0x52D1CACu, (uintptr_t)this, *((_DWORD *)this + 85), *((_BYTE *)this + 386), 1uLL, 0LL);
  }
  if ( *((_QWORD *)this + 26) && (v8 = *((_QWORD *)this + 27)) != 0 )
  {
    HIDWORD(v23) = 0;
    (*(void (__fastcall **)(__int64, bool *))(*(_QWORD *)v8 + 32LL))(v8, a2);
    v9 = (char *)&v23 + 4;
    v10 = (*(int (__fastcall **)(_QWORD, char *))(**(_QWORD **)(v4 + 216) + 2488LL))(
            *(_QWORD *)(v4 + 216),
            (char *)&v23 + 4);
    (*(void (__cdecl **)(_QWORD))(**(_QWORD **)(v4 + 216) + 40LL))(*(_QWORD *)(v4 + 216));
    if ( !(unsigned __int8)IOService::isInactive((IOService *)v4) )
    {
      v11 = *(_DWORD *)v5 & 2;
      if ( v10 )
      {
        if ( v11 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CACu, v4, v10, *(_DWORD *)(v4 + 340), 2uLL, 0LL);
        v12 = *(_DWORD *)(v4 + 340);
        if ( v12 && (v13 = v12 - 1, (*(_DWORD *)(v4 + 340) = v13) != 0) )
        {
          *v3 = 1;
          if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v14 = (unsigned int)v13;
            v15 = 4LL;
LABEL_55:
            kernel_debug(0x52D1CACu, v4, v14, 0LL, v15, 0LL);
            goto LABEL_56;
          }
        }
        else
        {
          *(_BYTE *)(v4 + 386) = 1;
          *v3 = 0;
          if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v14 = 0LL;
            v15 = 3LL;
            goto LABEL_55;
          }
        }
      }
      else
      {
        if ( v11 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          v9 = (char *)v4;
          kernel_debug(0x52D1CACu, v4, HIDWORD(v23), *(_DWORD *)(v4 + 340), 5uLL, 0LL);
        }
        if ( BYTE4(v23) & 8 )
        {
          if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v9 = (char *)v4;
            kernel_debug(0x52D1CACu, v4, *(_DWORD *)(v4 + 340), 0LL, 6uLL, 0LL);
          }
          v16 = *(_DWORD *)(v4 + 340);
          if ( v16 && (v17 = v16 - 1, (*(_DWORD *)(v4 + 340) = v17) != 0) )
          {
            if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              kernel_debug(0x52D1CACu, v4, (unsigned int)v17, *(_QWORD *)(v4 + 224), 9uLL, 0LL);
            v10 = 0;
            if ( *(_QWORD *)(v4 + 224) )
            {
              if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
                kernel_debug(0x52D1CACu, v4, 0LL, 0LL, 0xAuLL, 0LL);
              IOUSBHIDDriverPM::ClearFeatureEndpointHalt((IOUSBHIDDriverPM *)v4);
              *v3 = 1;
            }
          }
          else
          {
            *(_BYTE *)(v4 + 385) = 1;
            v18 = *(_QWORD *)(v4 + 224);
            if ( v18 )
              (*(void (__fastcall **)(__int64, char *))(*(_QWORD *)v18 + 296LL))(v18, v9);
            v19 = *(_QWORD *)(v4 + 232);
            if ( v19 )
              (*(void (__fastcall **)(__int64, char *))(*(_QWORD *)v19 + 296LL))(v19, v9);
            if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
            {
              v9 = (char *)v4;
              kernel_debug(0x52D1CACu, v4, 0LL, 0LL, 7uLL, 0LL);
            }
            v10 = (*(int (__fastcall **)(_QWORD, char *))(**(_QWORD **)(v4 + 216) + 2232LL))(*(_QWORD *)(v4 + 216), v9);
            *v3 = 0;
            if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
            {
              v14 = v10;
              v15 = 8LL;
              goto LABEL_55;
            }
          }
        }
        else
        {
          *(_BYTE *)(v4 + 386) = 1;
          *v3 = 0;
          v10 = 0;
          if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v14 = *(_QWORD *)(v4 + 216);
            v10 = 0;
            v15 = 11LL;
            goto LABEL_55;
          }
        }
      }
    }
  }
  else
  {
    *v3 = 0;
    v10 = 0;
    if ( *(_BYTE *)v5 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v10 = 0;
      v14 = 0LL;
      v15 = 12LL;
      goto LABEL_55;
    }
  }
LABEL_56:
  if ( *(_BYTE *)v5 & 2 )
  {
    v20 = *(_QWORD *)(v4 + 328);
    v21 = IOService::isInactive((IOService *)v4);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CAEu, v4, v20, v21, v10, 0LL);
  }
  return (unsigned int)v10;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;

//----- (0000000000005362) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::getMaxReportSize(IOUSBHIDDriverPM *this)
{
  unsigned int v1; // er14@1
  __int64 result; // rax@1

  v1 = IOUSBHIDDriverPM::GetNumberProperty((__int64)this, (__int64)this, (__int64)"MaxInputReportSize");
  result = IOUSBHIDDriverPM::GetNumberProperty((__int64)this, (__int64)this, (__int64)"MaxFeatureReportSize");
  if ( v1 > (unsigned int)result )
    result = v1;
  return result;
}

//----- (000000000000539A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::newIndexedString(IOUSBHIDDriverPM *this, const char *a2)
{
  __int64 *v2; // r14@1
  __int64 result; // rax@1
  __int64 v4; // rcx@1
  unsigned int v5; // [sp+Ch] [bp-124h]@1
  unsigned __int8 v6; // [sp+10h] [bp-120h]@1
  __int64 v7; // [sp+118h] [bp-18h]@1

  v2 = off_6028[0];
  v7 = *off_6028[0];
  v6 = 0;
  v5 = 256;
  IOUSBHIDDriverPM::GetIndexedString(this, (unsigned __int8)a2, &v6, &v5, 1033);
  result = OSString::withCString((OSString *)&v6, a2);
  v4 = *v2;
  return result;
}
// 6028: using guessed type __int64 *off_6028[4];

//----- (0000000000005406) ----------------------------------------------------
int __fastcall IOUSBHIDDriverPM::SetIdleMillisecs(IOUSBHIDDriverPM *this, __int16 a2)
{
  char v3; // [sp+0h] [bp-20h]@1
  char v4; // [sp+1h] [bp-1Fh]@1
  __int16 v5; // [sp+2h] [bp-1Eh]@1
  __int16 v6; // [sp+4h] [bp-1Ch]@1
  __int16 v7; // [sp+6h] [bp-1Ah]@1
  __int64 v8; // [sp+8h] [bp-18h]@1

  v3 = 33;
  v4 = 10;
  v5 = (a2 << 6) & 0xFF00;
  v6 = (unsigned __int8)(*(int (__cdecl **)(_QWORD))(**((_QWORD **)this + 26) + 2224LL))(*((_QWORD *)this + 26));
  v7 = 0;
  v8 = 0LL;
  return (*(int (__fastcall **)(IOUSBHIDDriverPM *, char *, _QWORD, _QWORD))(*(_QWORD *)this + 2672LL))(
           this,
           &v3,
           *((_DWORD *)this + 88),
           0LL);
}

//----- (000000000000546C) ----------------------------------------------------
char __fastcall IOUSBHIDDriverPM::IsPortSuspended(IOUSBHIDDriverPM *this)
{
  return *((_BYTE *)this + 384);
}

//----- (0000000000005478) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::RearmInterruptRead(IOUSBHIDDriverPM *this)
{
  uintptr_t v1; // r15@1
  __int64 *v2; // r12@1
  uintptr_t v3; // rbx@2
  unsigned __int8 v4; // al@2
  signed int v5; // er14@5
  uintptr_t v6; // rdx@6
  __int64 v7; // rdi@7
  __int64 v8; // rbx@10
  void (__fastcall *v9)(_QWORD, _QWORD); // r14@10
  uintptr_t v10; // rax@10
  uintptr_t v11; // rsi@10
  uintptr_t v12; // rax@11
  uintptr_t v13; // rbx@11
  uintptr_t v14; // rax@11
  int v15; // er13@13
  signed __int64 v16; // rax@13
  uintptr_t v17; // rcx@16
  uintptr_t v18; // r8@16
  __int64 v19; // r13@33
  uintptr_t v20; // rbx@33
  int (__fastcall *v21)(_QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD); // ST10_8@33
  __int64 v22; // rax@33
  signed int v23; // ebx@37
  uintptr_t v24; // rdx@39
  __int64 v25; // rdi@45
  uintptr_t v26; // rbx@47
  uintptr_t v27; // rbx@53
  unsigned __int8 v28; // al@53
  uintptr_t v30; // rcx@60
  uintptr_t v31; // r8@60
  signed __int64 v32; // [sp+18h] [bp-38h]@32

  v1 = (uintptr_t)this;
  v2 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v3 = *((_QWORD *)this + 41);
    v4 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CC1u, (uintptr_t)this, v3, v4, *((_BYTE *)this + 382), 0LL);
  }
  if ( (unsigned __int8)IOService::isInactive(this) )
  {
    *((_BYTE *)this + 382) = 0;
    v5 = -536870163;
    goto LABEL_52;
  }
  v6 = *((_QWORD *)this + 32);
  if ( !v6 || (v7 = *((_QWORD *)this + 28)) == 0 )
  {
    if ( !(*(_BYTE *)v2 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_18;
    v17 = *(_QWORD *)(v1 + 224);
    v18 = 0LL;
    goto LABEL_17;
  }
  if ( (unsigned __int16)(*(int (**)(void))(*(_QWORD *)v7 + 416LL))() )
  {
    if ( *(_QWORD *)(v1 + 280) )
    {
      (*(void (__fastcall **)(uintptr_t))(*(_QWORD *)v1 + 32LL))(v1);
      v8 = *(_QWORD *)(v1 + 256);
      v9 = *(void (__fastcall **)(_QWORD, _QWORD))(*(_QWORD *)v8 + 712LL);
      LODWORD(v10) = (*(int (__fastcall **)(_QWORD))(*(_QWORD *)v8 + 728LL))(*(_QWORD *)(v1 + 256));
      v11 = v10;
      v9(v8, v10);
      if ( *(_BYTE *)v2 & 2 )
      {
        LODWORD(v12) = (*(int (**)(void))(**(_QWORD **)(v1 + 256) + 456LL))();
        v13 = v12;
        LODWORD(v14) = (*(int (**)(void))(**(_QWORD **)(v1 + 256) + 728LL))();
        if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
        {
          v11 = v1;
          kernel_debug(0x52D1CC0u, v1, v13, v14, 2uLL, 0LL);
        }
      }
      v15 = -536870201;
      v5 = 0;
      v16 = 0LL;
      while ( 1 )
      {
        while ( 1 )
        {
          if ( v15 == -536870164 )
          {
            v23 = -536870164;
            goto LABEL_51;
          }
          if ( !v15 )
            goto LABEL_52;
          if ( (signed int)v16 > 29 || !*(_QWORD *)(v1 + 256) || !*(_QWORD *)(v1 + 224) )
          {
            v23 = v15;
            if ( !v15 )
              goto LABEL_52;
LABEL_51:
            *(_BYTE *)(v1 + 382) = 0;
            (*(void (__fastcall **)(uintptr_t, uintptr_t))(*(_QWORD *)v1 + 40LL))(v1, v11);
            v5 = v23;
            goto LABEL_52;
          }
          v32 = v16;
          if ( (unsigned __int8)IOService::isInactive((IOService *)v1) )
          {
            v23 = -536870163;
            if ( !(*(_BYTE *)v2 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
              goto LABEL_51;
            v24 = 0LL;
            v30 = 0LL;
            v31 = 3LL;
LABEL_64:
            v11 = v1;
            kernel_debug(0x52D1CC0u, v1, v24, v30, v31, 0LL);
            goto LABEL_51;
          }
          *(_BYTE *)(v1 + 382) = 1;
          v19 = *(_QWORD *)(v1 + 224);
          v20 = *(_QWORD *)(v1 + 256);
          v21 = *(int (__fastcall **)(_QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD))(*(_QWORD *)v19 + 520LL);
          LODWORD(v22) = (*(int (__fastcall **)(_QWORD, uintptr_t))(*(_QWORD *)v20 + 456LL))(*(_QWORD *)(v1 + 256), v11);
          v11 = v20;
          v15 = v21(v19, v20, 0LL, 0LL, v22, v1 + 272);
          if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          {
            v11 = v1;
            kernel_debug(0x52D1CC0u, v1, *(_QWORD *)(v1 + 328), v15, 4uLL, 0LL);
          }
          v16 = v32 + 1;
          if ( v15 < 0 )
            break;
          if ( v15 )
            goto LABEL_45;
        }
        v23 = -536870208;
        if ( v15 != -536870164 )
        {
          if ( v15 == -536870163 )
          {
            v24 = *(_BYTE *)(v1 + 383);
            if ( *(_BYTE *)(v1 + 383) || *(_QWORD *)(v1 + 328) <= 3uLL )
            {
              v23 = -536870163;
              if ( !(*(_BYTE *)v2 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
                goto LABEL_51;
              v30 = *(_QWORD *)(v1 + 328);
              v31 = 5LL;
              goto LABEL_64;
            }
          }
          else if ( v15 == -536870208 )
          {
            goto LABEL_51;
          }
LABEL_45:
          v25 = *(_QWORD *)(v1 + 224);
          if ( v25 )
          {
            if ( *(_BYTE *)v2 & 2 )
            {
              v26 = v32 + 1;
              if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
              {
                kernel_debug(0x52D1CC0u, v1, v15, v26, 6uLL, 0LL);
                v25 = *(_QWORD *)(v1 + 224);
              }
            }
            else
            {
              v26 = v32 + 1;
            }
            v11 = 0LL;
            (*(void (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v25 + 488LL))(v25, 0LL);
            IOSleep(10LL);
            v16 = v26;
          }
        }
      }
    }
    if ( !(*(_BYTE *)v2 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
    {
LABEL_18:
      *(_BYTE *)(v1 + 382) = 0;
      v5 = -536870201;
      goto LABEL_52;
    }
    v6 = 0LL;
    v17 = 0LL;
    v18 = 1LL;
LABEL_17:
    kernel_debug(0x52D1CC0u, v1, v6, v17, v18, 0LL);
    goto LABEL_18;
  }
  if ( *(_BYTE *)v2 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    kernel_debug(0x52D1CC0u, v1, 0LL, 0LL, 7uLL, 0LL);
  *(_BYTE *)(v1 + 382) = 0;
  v5 = -536870164;
LABEL_52:
  if ( *(_BYTE *)v2 & 2 )
  {
    v27 = *(_QWORD *)(v1 + 328);
    v28 = IOService::isInactive((IOService *)v1);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CC2u, v1, v27, v28, v5, 0LL);
  }
  return (unsigned int)v5;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 104B0: using guessed type int __fastcall IOSleep(_QWORD);

//----- (000000000000590A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequestWorker(IOUSBHIDDriverPM *this, void *a2, unsigned int a3, unsigned int a4, char a5)
{
  char v5; // r13@1
  unsigned int v6; // er15@1
  signed int v7; // er14@1
  int v8; // eax@3
  unsigned int v10; // [sp+0h] [bp-2Ch]@1

  v5 = a5;
  v10 = a4;
  v6 = a3;
  v7 = -536870208;
  if ( !(unsigned __int8)IOService::isInactive(this) )
  {
    (*(void (__fastcall **)(IOUSBHIDDriverPM *, signed __int64))(*(_QWORD *)this + 2688LL))(this, 1LL);
    if ( v5 )
      v8 = (*(int (__fastcall **)(_QWORD, void *, _QWORD, _QWORD, _QWORD))(**((_QWORD **)this + 27) + 2432LL))(
             *((_QWORD *)this + 27),
             a2,
             v6,
             v10,
             0LL);
    else
      v8 = (*(int (__fastcall **)(_QWORD, void *, _QWORD, _QWORD, _QWORD))(**((_QWORD **)this + 27) + 2424LL))(
             *((_QWORD *)this + 27),
             a2,
             v6,
             v10,
             0LL);
    v7 = v8;
    (*(void (__fastcall **)(IOUSBHIDDriverPM *, _QWORD))(*(_QWORD *)this + 2688LL))(this, 0LL);
  }
  return (unsigned int)v7;
}

//----- (00000000000059AA) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequest(IOUSBHIDDriverPM *a1, void *a2, unsigned int a3, unsigned int a4)
{
  return IOUSBHIDDriverPM::SendDeviceRequestWorker(a1, a2, a3, a4, 0);
}

//----- (00000000000059B8) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::SendDeviceRequest(IOUSBHIDDriverPM *a1, void *a2, unsigned int a3, unsigned int a4)
{
  return IOUSBHIDDriverPM::SendDeviceRequestWorker(a1, a2, a3, a4, 1);
}

//----- (00000000000059C8) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::RaisePowerState(IOUSBHIDDriverPM *this, IOUSBHIDDriverPM *a2)
{
  char v2; // bl@1
  uintptr_t v3; // r15@1
  __int64 *v4; // r12@1
  uintptr_t v5; // r14@2
  unsigned __int8 v6; // al@2
  uintptr_t v7; // rdx@3
  char *v8; // rdi@4
  int v9; // eax@5
  uintptr_t v10; // rcx@5
  int v11; // er14@12
  int v12; // ebx@12
  int v13; // eax@17
  uintptr_t v14; // rdx@20
  uintptr_t v15; // r8@20
  uintptr_t v16; // rbx@33
  unsigned __int8 v17; // al@33

  v2 = (char)a2;
  v3 = (uintptr_t)this;
  v4 = off_6030[0];
  if ( *(_BYTE *)off_6030[0] & 2 )
  {
    v5 = *((_QWORD *)this + 41);
    v6 = IOService::isInactive(this);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
    {
      v7 = (unsigned __int8)a2;
      a2 = this;
      kernel_debug(0x52D1CC5u, (uintptr_t)this, v7, v5, v6, 0LL);
    }
  }
  v8 = (char *)this + 372;
  if ( v2 )
  {
    v9 = OSIncrementAtomic(v8, a2);
    v10 = *(_DWORD *)(v3 + 356);
    if ( *(_DWORD *)(v3 + 356) && *(_BYTE *)(v3 + 388) )
    {
      if ( !v9 )
      {
        if ( *(_BYTE *)v4 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CC4u, v3, 0LL, 0LL, 0LL, 0LL);
        IOService::changePowerStateTo((IOService *)v3, 4uLL);
      }
      v11 = 0;
      v12 = (*(int (__fastcall **)(_QWORD, __int64 (__usercall *)@<rax>(IOUSBHIDDriverPM *@<rdi>, __int64@<rax>), _QWORD, _QWORD, _QWORD, _QWORD))(**(_QWORD **)(v3 + 248) + 456LL))(
              *(_QWORD *)(v3 + 248),
              IOUSBHIDDriverPM::EnsureUsability,
              0LL,
              0LL,
              0LL,
              0LL);
      if ( v12 )
      {
        if ( *(_BYTE *)v4 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
          kernel_debug(0x52D1CC4u, v3, v12, 0LL, 1uLL, 0LL);
        v11 = v12;
      }
      goto LABEL_32;
    }
    v11 = 0;
    if ( !(*(_BYTE *)v4 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_32;
    v14 = *(_DWORD *)(v3 + 372);
    v11 = 0;
    v15 = 2LL;
LABEL_24:
    kernel_debug(0x52D1CC4u, v3, v14, v10, v15, 0LL);
    goto LABEL_32;
  }
  v13 = OSDecrementAtomic(v8, a2);
  v11 = 0;
  if ( !v13 )
  {
    if ( !(*(_BYTE *)v4 & 2) || !(*(_DWORD *)off_6040 & 0xFFFFFFF7) )
      goto LABEL_32;
    v10 = *(_DWORD *)(v3 + 372);
    v11 = 0;
    v14 = 0LL;
    v15 = 4LL;
    goto LABEL_24;
  }
  if ( v13 == 1 && *(_DWORD *)(v3 + 356) && *(_BYTE *)(v3 + 388) )
  {
    if ( *(_BYTE *)v4 & 2 && *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CC4u, v3, *(_DWORD *)(v3 + 360), 0LL, 3uLL, 0LL);
    IOService::changePowerStateTo((IOService *)v3, *(_DWORD *)(v3 + 360));
  }
LABEL_32:
  if ( *(_BYTE *)v4 & 2 )
  {
    v16 = *(_QWORD *)(v3 + 328);
    v17 = IOService::isInactive((IOService *)v3);
    if ( *(_DWORD *)off_6040 & 0xFFFFFFF7 )
      kernel_debug(0x52D1CC6u, v3, v16, v17, v11, 0LL);
  }
  return (unsigned int)v11;
}
// 6030: using guessed type __int64 *off_6030[3];
// 6040: using guessed type __int64 *off_6040;
// 104C0: using guessed type int __fastcall OSDecrementAtomic(_QWORD, _QWORD);
// 104C8: using guessed type int __fastcall OSIncrementAtomic(_QWORD, _QWORD);

//----- (0000000000005C1E) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM0(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 0);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005C32) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM1(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 1);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005C48) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM2(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 2);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005C5E) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM3(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 3);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005C74) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM4(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 4);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005C8A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM5(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 5);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005CA0) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM6(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 6);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005CB6) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM7(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 7);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005CCC) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM8(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 8);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005CE2) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM9(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 9);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005CF8) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM10(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 10);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D0E) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM11(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 11);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D24) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM12(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 12);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D3A) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM13(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 13);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D50) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM14(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 14);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D66) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM15(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 15);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D7C) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM16(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 16);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005D92) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM17(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 17);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005DA8) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM18(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 18);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005DBE) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::_RESERVEDIOUSBHIDDriverPM19(IOUSBHIDDriverPM *this)
{
  return OSMetaClass::reservedCalled((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass, 19);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005DD4) ----------------------------------------------------
__int64 __fastcall IOUSBHIDDriverPM::MetaClass::~MetaClass(IOUSBHIDDriverPM::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000005DE0) ----------------------------------------------------
__int64 `global constructor keyed to'_a()
{
  __int64 result; // rax@1

  OSMetaClass::OSMetaClass(&IOUSBHIDDriverPM::gMetaClass, "IOUSBHIDDriverPM", off_6000[0], 400LL);
  result = (__int64)off_6BC0;
  IOUSBHIDDriverPM::gMetaClass = off_6BC0;
  return result;
}
// 6000: using guessed type _QWORD *off_6000[9];
// 6BC0: using guessed type __int64 (__fastcall *off_6BC0[2])(IOUSBHIDDriverPM::MetaClass *__hidden this);
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;
// 106A0: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000005E20) ----------------------------------------------------
__int64 `global destructor keyed to'_a()
{
  return OSMetaClass::~OSMetaClass((OSMetaClass *)&IOUSBHIDDriverPM::gMetaClass);
}
// 6F48: using guessed type _QWORD IOUSBHIDDriverPM::gMetaClass;

//----- (0000000000005E31) ----------------------------------------------------
int _start()
{
  int result; // eax@2

  if ( _realmain )
    result = _realmain();
  else
    result = 0;
  return result;
}
// 6F70: using guessed type int (*_realmain)(void);

//----- (0000000000005E4B) ----------------------------------------------------
__int64 *OSKextGetCurrentIdentifier()
{
  return &kmod_info + 2;
}
// 6E80: using guessed type __int64 kmod_info;

//----- (0000000000005E5C) ----------------------------------------------------
__int64 *OSKextGetCurrentVersionString()
{
  return &kmod_info + 10;
}
// 6E80: using guessed type __int64 kmod_info;

//----- (0000000000005E6D) ----------------------------------------------------
__int64 OSKextGetCurrentLoadTag()
{
  return *((_DWORD *)&kmod_info + 3);
}
// 6E80: using guessed type __int64 kmod_info;

//----- (0000000000005E7D) ----------------------------------------------------
int _stop()
{
  int result; // eax@2

  if ( _antimain )
    result = _antimain();
  else
    result = 0;
  return result;
}
// 6F78: using guessed type int (*_antimain)(void);

// ALL OK, 89 function(s) have been successfully decompiled
